"use strict";(()=>{var Xn=Object.defineProperty;var r=(z,_)=>Xn(z,"name",{value:_,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[5998],{76745:(z,_,f)=>{f.d(_,{Z:()=>E});function d(h){const j=document.createElement("pre");return j.style.width="1px",j.style.height="1px",j.style.position="fixed",j.style.top="5px",j.textContent=h,j}r(d,"createNode");function x(h){if("clipboard"in navigator)return navigator.clipboard.writeText(h.textContent);const j=getSelection();if(j==null)return Promise.reject(new Error);j.removeAllRanges();const F=document.createRange();return F.selectNodeContents(h),j.addRange(F),document.execCommand("copy"),j.removeAllRanges(),Promise.resolve()}r(x,"copyNode");function T(h){if("clipboard"in navigator)return navigator.clipboard.writeText(h);const j=document.body;if(!j)return Promise.reject(new Error);const F=d(h);return j.appendChild(F),x(F),j.removeChild(F),Promise.resolve()}r(T,"copyText");function R(h){const j=h.getAttribute("for"),F=h.getAttribute("value");function y(){h.dispatchEvent(new CustomEvent("clipboard-copy",{bubbles:!0}))}if(r(y,"trigger"),F)T(F).then(y);else if(j){const O="getRootNode"in Element.prototype?h.getRootNode():h.ownerDocument;if(!(O instanceof Document||"ShadowRoot"in window&&O instanceof ShadowRoot))return;const q=O.getElementById(j);q&&C(q).then(y)}}r(R,"copy");function C(h){return h instanceof HTMLInputElement||h instanceof HTMLTextAreaElement?T(h.value):h instanceof HTMLAnchorElement&&h.hasAttribute("href")?T(h.href):x(h)}r(C,"copyTarget");function u(h){const j=h.currentTarget;j instanceof HTMLElement&&R(j)}r(u,"clicked");function v(h){if(h.key===" "||h.key==="Enter"){const j=h.currentTarget;j instanceof HTMLElement&&(h.preventDefault(),R(j))}}r(v,"keydown");function w(h){h.currentTarget.addEventListener("keydown",v)}r(w,"focused");function a(h){h.currentTarget.removeEventListener("keydown",v)}r(a,"blurred");class p extends HTMLElement{constructor(){super();this.addEventListener("click",u),this.addEventListener("focus",w),this.addEventListener("blur",a)}connectedCallback(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.hasAttribute("role")||this.setAttribute("role","button")}get value(){return this.getAttribute("value")||""}set value(j){this.setAttribute("value",j)}}r(p,"ClipboardCopyElement"),window.customElements.get("clipboard-copy")||(window.ClipboardCopyElement=p,window.customElements.define("clipboard-copy",p));const E=p},46100:(z,_,f)=>{var d=f(59753),x=f(37713);(0,d.on)("click",".js-conversation-menu-button",function(){let e=!0;return async function(t){if(e===!1){const o=t.currentTarget.closest(".select-menu").querySelector("details-menu");if(!o)return;o.innerHTML="";const i=`${o.getAttribute("src")}?instrument=1`,l=await fetch(i);l.ok&&(o.innerHTML=await l.text())}e=!1}}()),(0,d.on)("click",".js-conversations-menu-item",function(e){const t=e.currentTarget,n=t.closest(".js-conversations-details");n.hasAttribute("open")&&n.removeAttribute("open"),window.location.hash=t.hash,(0,x.kc)(document)}),(0,d.on)("click",".js-resolved-conversations",async function(e){const t=e.currentTarget.querySelector(".dropdown-caret"),n=e.currentTarget.querySelector(".select-menu-header");T(t),n.classList.toggle("border-bottom-0")});function T(e){e.style.transform===""?e.style.transform="rotate(180deg)":e.style.transform=""}r(T,"flipCaret");var R=f(86404),C=f(70130),u=f(64463),v=f(96310);(0,d.on)("details:toggled-group",".js-file.js-details-container",function(e){e.target===e.currentTarget&&a(e.detail.open)}),(0,d.on)("details:toggled",".js-file.js-details-container",function(e){if(e.target!==e.currentTarget)return;const t=e.currentTarget;t.getBoundingClientRect().top<0&&(0,x.zT)(t)}),(0,C.Z)(()=>{const e=window.location.hash.slice(1);if(!e)return;const t=document.getElementsByName(e)[0];if(!t)return;const n=t.nextElementSibling;n&&n.matches(".js-file.js-details-container")&&(n.classList.add("open"),n.classList.add("Details--on"))}),(0,u.N7)(".js-file-header-dropdown",{subscribe:e=>(0,R.RB)(e,"toggle",w)});function w({currentTarget:e}){const t=e,n=t.hasAttribute("open");t.closest(".js-file-header").classList.toggle("has-open-dropdown",n)}r(w,"toggleFileHeaderMenu");function a(e){if(!document.querySelector(".js-file-filter"))return;const n=E();for(const i of n)i.checked=e;const s=h();s&&(s.checked=!e);const o=j();ie(o),re(o),xe(),pe(),Ce(),(0,v.X)(o,Y(),p(),F(),y(),q(),D(),K())}r(a,"toggledAllFileContents");function p(){return Array.from(E()).filter(t=>t.checked).map(t=>t.value)}r(p,"getSelectedFileTypes");function E(){return document.querySelectorAll(".js-diff-file-type-option")}r(E,"getFileTypeOptions");function h(){const e=document.querySelector(".js-deleted-files-toggle");if(e instanceof HTMLInputElement)return e}r(h,"getDeletedFilesInput");function j(){return O()||D()||K()||F()||q()}r(j,"fileFilterActive");function F(){return y().length>0}r(F,"codeownerFilterActive");function y(){const e=document.querySelectorAll(".js-diff-owner-option");return Array.from(e).filter(n=>n.checked).map(n=>n.value)}r(y,"getSelectedOwners");function O(){return p().length!==E().length}r(O,"fileTypeFilterActive");function q(){const e=document.querySelector(".js-manifests-option");return e?e.checked:!1}r(q,"manifestFilterActive");function D(){const e=h();return e?!e.checked:!1}r(D,"deletedFilterActive");function K(){const e=document.querySelector(".js-viewed-files-toggle");return e?!e.checked:!1}r(K,"viewedFilterActive");function Y(){return new URLSearchParams(window.location.search).has("w")}r(Y,"whitespaceFilterActive");function ie(e){document.querySelector(".js-file-filter-text").classList.toggle("color-fg-accent",e)}r(ie,"toggleHighlightActiveFilter");function re(e){const t=document.querySelector(".js-reset-filters"),n=document.querySelector(".js-commits-filtered");t!=null&&!n&&(t.hidden=!e)}r(re,"toggleResetFileFiltersButton");function pe(){const e=O(),t=document.querySelector(".js-file-filter-select-all-container"),n=e?"data-select-all-markup":"data-all-selected-markup",s=t.getAttribute(n);t.textContent=s,t.classList.toggle("color-fg-muted",!e),t.classList.toggle("color-fg-accent",e)}r(pe,"toggleSelectAll");function xe(){const e=E(),t=D();for(const n of e)if(t){const s=n.getAttribute("data-non-deleted-files-count")==="0";n.disabled=s}else n.disabled=!1}r(xe,"toggleAvailableOptions");function Ce(){const e=document.querySelectorAll(".js-file-type-count");for(const t of e){const n=D()?"data-non-deleted-file-count-markup":"data-all-file-count-markup",s=t.getAttribute(n);s&&(t.textContent=s)}}r(Ce,"toggleFileTypeCounts");function we(){const e=document.querySelector(".js-file-filter-blankslate");if(!e)return;if(document.querySelectorAll(".js-diff-progressive-loader").length>0){e.hidden=!0;return}const n=document.querySelectorAll(".js-file");if(n.length===0){e.hidden=!0;return}const s=Array.from(n).some(o=>!o.hidden);e.hidden=s}r(we,"checkEmptyFilterResults"),(0,d.on)("click",".js-jump-to-menu-item",function({currentTarget:e}){const t=e.getAttribute("href").substring(1),n=document.querySelector(`[data-anchor="${t}"]`);if(n){const s=n.closest(".js-file.js-details-container");s.hidden=!1}we()});var be=f(95140),ye=f(70497),G=f(69567),ve=f(82036),m=f(52660),g=f(10900),L=f(65935);const k="```suggestion",N="```",P=new RegExp(`${k}(?:.*)
`,"i"),V=new RegExp(`${N}(
|$)`);function H(e,t){const n=e.slice(0,t).split(`
`);return e.split(`
`)[n.length-1]}r(H,"lineAtIndex");function W(e){const n=/^(\s+)/.exec(e);return n&&n[0]||""}r(W,"leadingWhitespace");function J(e){let t=`${k}
`;return t+=`${e}
`,t+=N,t}r(J,"formatSuggestion");function le(e,t,n=0){const s=t.substring(n,t.length),o=e.exec(s);return o?o.index+n:-1}r(le,"findNextOccurrenceOf");function Se(e,t){const n=[];let s=0,o=-1;for(;(o=le(P,e,s))>-1;){s=o+k.length;const i=le(V,e,s);if(i===-1)return!1;s=i+N.length,n.push([o,i])}return n.some(i=>t>i[0]&&t<i[1])}r(Se,"cursorInSuggestionBlock");function Ot(e){const t=e.selectionStart;if(!Se(e.value,t))return!1;const n=e.value,s=H(n,t);if(s===null)return!1;const i=`
${W(s)}`,l=n.substr(0,t)+i+n.substr(t);(0,ve.Se)(e,l);const c=t+i.length;return e.setSelectionRange(c,c),!0}r(Ot,"insertNewSuggestionLine");function Pt(e,t){const n=J(e),s=t.selectionStart,o=t.value,i=le(/\n/,o,s),l=o.trim()==="",c=H(o,s),A=c.trim()==="",S=`
${N}`.length;let b=o,I=0;if(l)b=n,I=b.length-S;else if(i===-1)A?(b=o+n,I=b.length-S):(b=[o,n].join(`
`),I=b.length-S);else if(A){const M=W(c),$=s-M.length,U=o.substring(0,$),Z=o.substring(i,o.length);b=[U,n,Z].join(""),I=b.length-Z.length-S}else if(Se(o,s)){const M=le(/```/,o,s)+3,$=o.substring(0,M),U=o.substring(M,o.length);b=[$,`
`,n,U].join(""),I=b.length-U.length-S}else{const M=o.substring(0,i),$=o.substring(i,o.length);b=[M,`
`,n,$].join(""),I=b.length-$.length-S}(0,ve.Se)(t,b),t.focus(),t.setSelectionRange(I,I)}r(Pt,"insertSuggestionBlock");var Ve=f(84570),qe=f(74136);const X={addToBatchEnabled:".js-add-to-batch-enabled",unchangedSuggestion:".js-unchanged-suggestion",closedOrMergedPull:".js-closed-pull",viewingSubset:".js-viewing-subset-changes",leftBlob:".js-validation-on-left-blob",rightBlob:".js-validation-on-right-blob",outdatedComment:".js-outdated-comment",resolvedThread:".js-resolved-thread",pendingReview:".js-pending-review",isMultiLine:".js-is-multiline",inMergeQueue:".js-in-merge-queue"};function _t(e){const t=e.getAttribute("data-lines");if(t!=null){const s=e.closest(".js-suggested-changes-container").querySelector(".js-comment-field");Pt(t,s)}}r(_t,"renderSuggestionBlock");function ze(e,t){const n=document.querySelectorAll(".js-apply-suggestion-button"),s=e.querySelector(".js-disabled-apply-suggestion-button");for(const o of n){const i=s.cloneNode(!0);ae(i,t),o.closest("details").replaceWith(i)}}r(ze,"disableAllApplySuggestionButtons");function Qe(e){const t=document.querySelector(".js-batched-suggested-changes-container");t&&t.classList.add("d-none");for(const n of document.querySelectorAll(".js-apply-single-suggestion"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",e);for(const n of document.querySelectorAll(".js-batched-suggested-changes-add"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",e);for(const n of document.querySelectorAll(".js-batched-suggested-changes-remove"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-pending-batched-suggestion-label"))n.classList.add("d-none")}r(Qe,"disableBatchSuggestionsButtons");function ae(e,t){e.setAttribute("aria-label",t),e.classList.remove("d-none")}r(ae,"displayButton");function De(e,t){const n=document.querySelector(".js-suggested-changes-inline-validation-template").cloneNode(!0);n.classList.remove("js-suggested-changes-inline-validation-template");const s=n.querySelector(".js-suggested-changes-inline-error-message");s.textContent=e.trim(),t.parentNode.insertBefore(n,t.nextSibling)}r(De,"validateOnPreview"),(0,d.on)("click",".js-suggested-change-toolbar-item",function(e){const t=e.currentTarget;t instanceof HTMLButtonElement&&t.getAttribute("aria-disabled")==="false"&&_t(t)}),(0,d.on)("click",".js-refresh-after-suggestion",qe.H5);function Ze(e){if(!document.querySelector(".js-suggested-changes-subset-files"))return;const n=e.querySelectorAll(".js-suggested-change-toolbar-item"),s=X.viewingSubset;if(!s)return;const o=document.querySelector(s).textContent.trim();for(const i of n){i.setAttribute("aria-disabled","true");const l=i.getAttribute("aria-describedby"),c=document.getElementById(l);c.textContent=o}}r(Ze,"validateInlineCommmentsContainer"),(0,u.N7)(".js-inline-comments-container",{add(e){Ze(e)}}),(0,u.N7)(".js-preview-body .js-apply-changes",{add(e){const t=e.closest(".js-suggested-changes-container");if(!t)return e.remove();const n=document.querySelector(X.rightBlob).textContent,s=document.querySelector(X.leftBlob).textContent,o=e.closest(".js-suggested-changes-blob");if(t.getAttribute("data-thread-side")!==""){if(t.getAttribute("data-thread-side")==="left")return De(s,o),e.remove()}else{const b=e.closest(".js-inline-comment-form"),I=b.querySelector('input[name="side"]');if(!b||!I)return e.remove();if(b&&I.value==="left")return De(s,o),e.remove()}const i=e.previousElementSibling,l=i.querySelector(".js-blob-code-deletion"),c=i.querySelectorAll(".js-blob-code-addition");if(!l||c.length===0)return;const A=l.textContent,S=Array.from(c).map(b=>b.textContent);if(A===S.join(`
`))return De(n,o),e.remove();e.remove()}}),(0,u.N7)(".js-comment-body .js-apply-changes",{add(e){const t=e.closest(".js-suggested-changes-container");if(!t)return e.remove();const n=t.querySelector(".js-suggested-changes-template");if(!(n instanceof HTMLTemplateElement))return e.remove();const s=n.content.cloneNode(!0),o=s.querySelector(".js-disabled-apply-suggestion-button");let i;try{i=s.querySelector(".js-batched-suggested-changes-add")}catch(B){if(B.name!=="QueryError")throw B}if(document.querySelectorAll(".js-suggested-changes-files-tab").length){const B=document.querySelector(X.addToBatchEnabled).textContent;i&&(i.removeAttribute("disabled"),i.setAttribute("aria-label",B))}const l=document.querySelector(".js-pull-header-details"),c=l&&l.getAttribute("data-pull-is-open")==="true",A=e.closest(".js-resolvable-timeline-thread-container"),S=n.getAttribute("data-comment-pending")==="true",b=n.getAttribute("data-in-merge-queue")==="true",I=t.classList.contains("js-selection-contains-deletions");if(A&&A.getAttribute("data-resolved")==="true"){const B=document.querySelector(X.resolvedThread).textContent,te=s.querySelector("details");return te&&te.remove(),ae(o,B),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",B)),e.replaceWith(s)}if(!c){const B=document.querySelector(X.closedOrMergedPull).textContent;return ae(o,B),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",B)),e.replaceWith(s)}if(b){const B=document.querySelector(X.inMergeQueue);let te="";B&&(te=B.textContent||"");const oe=s.querySelector("details");return oe&&oe.remove(),ae(o,te),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",te)),e.replaceWith(s)}if(S){const B=document.querySelector(X.pendingReview).textContent;return s.querySelector("details").remove(),ae(o,B),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",B)),e.replaceWith(s)}if(I){const B=document.querySelector(X.leftBlob).textContent;return s.querySelector("details").remove(),ae(o,B),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",B)),e.replaceWith(s)}const M=document.querySelector(".js-suggested-changes-subset-files"),$=n.getAttribute("data-outdated-comment")==="true";if(M||$){let B;return M?B=document.querySelector(X.viewingSubset).textContent:$&&(B=document.querySelector(X.outdatedComment).textContent),s.querySelector("details").remove(),ae(o,B),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",B)),e.replaceWith(s)}const U=s.querySelector(".js-single-suggested-change-form"),Z=e.closest(".js-suggested-changes-blob");if(Z){const B=Z.querySelectorAll(".js-blob-code-deletion"),te=Z.querySelectorAll(".js-blob-code-addition");if(!B)return;const oe=Array.from(B).map(se=>se.textContent),he=Array.from(te).map(se=>se.textContent);if(oe.length===he.length&&oe.every((se,fe)=>se===he[fe])){const se=document.querySelector(X.unchangedSuggestion).textContent;s.querySelector("details").remove(),ae(o,se),i&&(i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",se))}else for(const se of he){const fe=document.createElement("input");fe.setAttribute("type","hidden"),fe.setAttribute("name","value[]"),fe.value=se,U.appendChild(fe)}}e.replaceWith(s)}}),(0,u.N7)(".js-pull-header-details",{add(e){const t=e.getAttribute("data-pull-is-open")==="true",n=document.querySelector(".js-suggested-changes-template");if(t||!(n instanceof HTMLTemplateElement))return;const s=n.content,o=document.querySelector(X.closedOrMergedPull).textContent;ze(s,o),Qe(o)}}),(0,u.N7)(".js-suggested-changes-subset-files",{add(){const e=document.querySelector(".js-suggested-changes-template");if(!(e instanceof HTMLTemplateElement))return;const t=e.content,n=document.querySelector(X.viewingSubset).textContent;ze(t,n),Qe(n)}}),(0,d.on)("click",".js-apply-suggestion-button",async function(e){const t=e.currentTarget.parentElement;if(t){const n=t.querySelector(".js-suggestion-commit-title");setTimeout(()=>n.focus(),1)}}),(0,d.on)("click",".js-dismiss-suggested-change-onboarding-notice",async function(e){const t=e.currentTarget.getAttribute("data-url"),n=e.currentTarget.parentElement.querySelector(".js-data-url-csrf"),s=new FormData;if(s.append("notice","suggested_changes_onboarding_prompt"),(await fetch(t,{method:"POST",mode:"same-origin",body:s,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok){const i=document.querySelectorAll(".js-suggested-change-onboarding-notice");for(const l of i)l.remove()}}),(0,Ve.w4)("keypress",".js-comment-field",function(e){if(e.key==="Enter"){const t=e.target;Ot(t)&&e.preventDefault()}}),(0,Ve.w4)("keypress",".js-suggestion-commit-message",function(e){const t=e.currentTarget;e.key==="Enter"&&t.setAttribute("rows","3")});function Ht(e){const n=e.closest(".js-review-state-classes").querySelectorAll("[data-pending-batched-suggestion]").length;for(const o of document.querySelectorAll(".js-pending-batched-suggested-changes-count"))o.textContent=String(n);const s=document.querySelector(".js-reenable-add-to-batch").textContent;for(const o of document.querySelectorAll("[data-batched-suggestion-reenable-sibling]"))o.removeAttribute("data-batched-suggestion-reenable-sibling"),o.removeAttribute("disabled"),o.setAttribute("aria-label",s);if(n>0){e.hidden=!1;const o=e.querySelector(".js-batched-suggested-changes-toggle");o.classList.add("anim-pulse-in"),o.addEventListener("animationend",()=>o.classList.remove("anim-pulse-in"),{once:!0});for(const i of document.querySelectorAll(".js-apply-single-suggestion"))i.classList.add("d-none");for(const i of document.querySelectorAll(".js-batched-suggested-changes-add")){const l=i.closest(".js-suggested-change-form-container");l.getAttribute("data-pending-batched-suggestion")==="true"||l.getAttribute("data-comment-pending")==="true"||l.getAttribute("data-outdated-comment")==="true"?i.classList.add("d-none"):i.classList.remove("d-none"),i.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true"&&(i.removeAttribute("data-batched-suggestion-disabled-by-sibling"),i.setAttribute("disabled","disabled"),i.setAttribute("aria-label",document.querySelector(".js-one-suggestion-per-line").textContent))}for(const i of document.querySelectorAll(".js-batched-suggested-changes-remove"))i.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?i.classList.remove("d-none"):i.classList.add("d-none");for(const i of document.querySelectorAll(".js-focus-commit-suggestions-form-button")){const l=i.closest(".js-suggested-change-form-container"),c=l.getAttribute("data-comment-pending")==="true",A=l.getAttribute("data-outdated-comment")==="true",S=l.getAttribute("data-resolved-comment")==="true",M=i.closest(".js-inline-comments-container").querySelector('input[name="side"]').value==="left";c||A||S||M?i.classList.add("d-none"):i.classList.remove("d-none")}for(const i of document.querySelectorAll(".js-pending-batched-suggestion-label"))i.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?i.classList.remove("d-none"):i.classList.add("d-none")}else{e.hidden=!0;for(const o of document.querySelectorAll(".js-apply-single-suggestion"))o.classList.remove("d-none");for(const o of document.querySelectorAll(".js-batched-suggested-changes-add"))o.classList.remove("d-none");for(const o of document.querySelectorAll(".js-batched-suggested-changes-remove"))o.classList.add("d-none");for(const o of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))o.classList.add("d-none");for(const o of document.querySelectorAll(".js-pending-batched-suggestion-label"))o.classList.add("d-none")}}r(Ht,"updatePendingSuggestionsState");function Ke(){const e=document.querySelector(".js-batched-suggested-changes-container");e&&setTimeout(()=>Ht(e))}r(Ke,"updatePendingSuggestionsHandler"),(0,d.on)("click",".js-batched-suggested-changes-add",function(e){const t=e.target,n=t.closest(".js-suggested-change-form-container");if(n.getAttribute("data-comment-pending")==="true"||n.getAttribute("data-outdated-comment")==="true"||t.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true")return;n.setAttribute("data-pending-batched-suggestion","true");const s=t.closest(".js-inline-comments-container");for(const o of s.querySelectorAll(".js-batched-suggested-changes-add"))o.setAttribute("data-batched-suggestion-disabled-by-sibling","true");t.removeAttribute("data-batched-suggestion-disabled-by-sibling"),Ke()}),(0,d.on)("click",".js-batched-suggested-changes-remove",function(e){e.currentTarget.closest(".js-suggested-change-form-container").removeAttribute("data-pending-batched-suggestion");const n=e.currentTarget.closest(".js-inline-comments-container");for(const s of n.querySelectorAll(".js-batched-suggested-changes-add"))s.setAttribute("data-batched-suggestion-reenable-sibling","true");Ke()}),(0,d.on)("click",".js-focus-commit-suggestions-form-button",function(e){e.preventDefault(),window.location.href="#clear-commit-suggestions",window.location.href="#commit-suggestions"}),(0,d.on)("click",".js-dismiss-batched-suggested-changes-onboarding-notice",async function(e){const t=e.currentTarget.getAttribute("data-url"),n=e.currentTarget.parentElement.querySelector(".js-data-url-csrf"),s=new FormData;if(s.append("notice","batched_suggested_changes_onboarding_prompt"),(await fetch(t,{method:"POST",mode:"same-origin",body:s,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok)for(const i of document.querySelectorAll(".js-batched-suggested-change-onboarding-notice"))i.remove()});function Ge(e,t){const n=e.querySelector("input[name=commit_title]"),s=e.querySelector("textarea[name=commit_message]");let o=n.value.trim();o===""&&(o=n.defaultValue);const i=s.value.trim();i!==""&&(o=`${o}

${i}
`),n.disabled=!0,s.disabled=!0;const l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name","message"),l.value=o,e.appendChild(l);const c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","changes"),c.value=JSON.stringify(t),e.appendChild(c)}r(Ge,"convertFormInputs"),(0,d.on)("click",".js-single-suggested-change-form .js-suggested-changes-submit",function(e){const n=e.currentTarget.closest(".js-single-suggested-change-form"),s=Array.from(n.querySelectorAll('input[name="value[]"]')).map(i=>i.value),o=[{commentId:n.querySelector("input[name=comment_id]").value,path:n.querySelector("input[name=path]").value,suggestion:s}];Ge(n,o)}),(0,L.AC)(".js-single-suggested-change-form",async function(e,t){const n=e.closest(".js-suggested-change-form-container"),s=e.closest("details"),o=n.querySelector(".js-suggestion-applied"),l=e.closest(".js-suggested-changes-contents").querySelector(".js-error-message-placeholder");try{await t.json(),o.classList.remove("d-none"),n.querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),s.remove(),(0,qe.H5)()}catch(c){if(c.name!=="QueryError"){const A=c.response.json&&c.response.json.error,S=l.querySelector(".js-error-message");l.hidden=!1,S.textContent=A,n.prepend(l),e.closest(".js-suggested-change-form-container").querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),s.remove()}}}),(0,d.on)("click",".js-suggestion-batch-submit",function(e){const t=e.currentTarget.closest(".js-batched-suggested-changes-form"),n=[];for(const s of document.querySelectorAll("[data-pending-batched-suggestion]")){const o=s.querySelector(".js-single-suggested-change-form"),i=Array.from(o.querySelectorAll('input[name="value[]"]')).map(l=>l.value);n.push({commentId:o.querySelector("input[name=comment_id]").value,path:o.querySelector("input[name=path]").value,suggestion:i})}Ge(t,n)}),(0,L.AC)(".js-batched-suggested-changes-form",async function(e,t){try{await t.json();const n=e.closest(".js-batched-suggested-changes-container");n.hidden=!0,(0,qe.H5)()}catch(n){const s=n.response.json&&n.response.json.error,i=e.closest(".js-batched-suggested-changes-container").querySelector(".js-error-message-container"),l=i.querySelector(".js-error-message");l.textContent=s,i.hidden=!1}}),(0,u.N7)(".js-files-tab-stale",{add(){const e=document.querySelector(".js-batched-suggested-changes-container");e&&setTimeout(()=>{e.hidden=!0})}});let Nt=0;(0,d.on)("click",".js-add-single-line-comment",function(e){const t=e.currentTarget,n=t.closest(".file");Je(n);const s=$t(t)||Ut(t),o=Ye(s.querySelector("td"),t),i=o.querySelector(".js-inline-comment-form");i instanceof HTMLFormElement&&ot(i,t),(0,be.j)(o)});function $t(e){const t=e.closest("tr"),n=Xe(t,".js-inline-comments-container");if(n instanceof Element)return n}r($t,"existingCommentRow");function Xe(e,t){const n=e.nextElementSibling;return n&&n.matches(t)?n:null}r(Xe,"next");function Ut(e){const t=e.closest("tr"),n=Oe("js-inline-comments-single-container-template",e).firstElementChild;return t.after(n),n}r(Ut,"insertCommentRow");function Ye(e,t){const n=Array.from(e.querySelectorAll(".review-comment-form-container")).pop();if(n)return n.closest("div.js-line-comments");{const s=Oe("js-inline-comments-single-container-template",t).querySelector("div.js-line-comments");return e.appendChild(s),s}}r(Ye,"findOrInsertCommentThread"),(0,d.on)("click",".js-add-split-line-comment",function(e){const t=e.currentTarget,n=t.closest(".file");Je(n);const s=t.closest("tr"),o=t.getAttribute("data-type")==="addition"?"js-addition":"js-deletion",i=Gt(s),l=Kt(i,o,t),c=Ye(l,t),A=c.querySelector(".js-inline-comment-form");A instanceof HTMLFormElement&&ot(A,t),(0,be.j)(c)}),(0,L.AC)(".js-inline-comment-form",async function(e,t){Wt(e);let n;try{n=await t.json()}catch(c){if(c.response){let A;try{A=c.response.json}catch{}if(A){Vt(e,A);return}}throw c}const s=n.json,o=s.inline_comment,i=e.closest(".js-line-comments");o&&i.querySelector(".js-comments-holder").append((0,g.r)(document,o));const l=s.inline_comment_thread;l&&i.replaceWith((0,g.r)(document,l)),(0,be.w)(e)});function Wt(e){const t=e.querySelector(".js-comment-form-error");t&&(t.hidden=!0,t.textContent=null)}r(Wt,"resetInlineCommentError");function Vt(e,t){const n=e.querySelector(".js-comment-form-error");let s;t.errors?Array.isArray(t.errors)?s=t.errors.join(", "):s=t.errors:s="There was an error posting your comment.",n.textContent=s,n.style.display="block",n.hidden=!1,n.classList.remove("d-none")}r(Vt,"handleInlineCommentError");function zt(e){const[t,n]=e.match(/^new_inline_comment_(?:discussion|diff)_(?:[\w-]+)_(\d+)_(\d+)$/)||[];if(!t)return;const s=document.querySelector(`.js-inline-comment-form input[name='in_reply_to'][value='${n}']`);if(!s)return;const o=s.closest(".js-line-comments");o&&(0,be.j)(o)}r(zt,"showReplyForm");function Qt(e){const[t,n]=e.match(/^new_inline_comment_diff_(?:[\w-]+)_(\d+)$/)||[];if(!t)return;const s=document.querySelector(`.js-add-line-comment[data-anchor='${t}'][data-position='${n}']`);s&&s.click()}r(Qt,"showCommentForm"),document.addEventListener("session:resume",function(e){const t=e.detail;zt(t.targetId),Qt(t.targetId)});function Je(e){const t=e.querySelector(".js-toggle-file-notes");t instanceof HTMLInputElement&&(0,ve.Se)(t,!0)}r(Je,"ensureInlineNotesEnabled");function et(){for(const e of document.querySelectorAll(".file .js-inline-comments-container")){const n=e.querySelectorAll(".js-comments-holder > *").length>0,s=e.querySelector("[data-resolved='true']")!=null,o=e.querySelector(".js-inline-comment-form-container"),i=!!o&&o.classList.contains("open");!(n||s)&&!i&&e.remove()}}r(et,"cleanupInlineCommentContainers"),(0,u.N7)(".js-comment",{remove:et}),(0,d.on)("inlinecomment:focus",".js-inline-comment-form-container",function(e){const t=e.target.querySelector(".js-suggested-changes-container");t&&tt(t)}),(0,u.N7)(".js-suggested-changes-container.is-comment-editing",e=>{tt(e)});function Zt(e,t){const n=new URLSearchParams(e.search.slice(1)),s=t.elements.namedItem("in_reply_to")||t.elements.namedItem("comment_id"),o=t.querySelector("textarea");if(n.append("textarea_id",o.id),s instanceof HTMLInputElement&&s.value)return n.append("comment_id",s.value),n;const i=t.elements.namedItem("path"),l=t.elements.namedItem("start_side"),c=t.elements.namedItem("start_line"),A=t.elements.namedItem("side"),S=t.elements.namedItem("line"),b=t.elements.namedItem("start_commit_oid"),I=t.elements.namedItem("end_commit_oid"),M=t.elements.namedItem("base_commit_oid");return!(i instanceof HTMLInputElement)||!(l instanceof HTMLInputElement)||!(c instanceof HTMLInputElement)||!(A instanceof HTMLInputElement)||!(S instanceof HTMLInputElement)||!(b instanceof HTMLInputElement)||!(I instanceof HTMLInputElement)||!(M instanceof HTMLInputElement)?null:(n.append("path",i.value),n.append("start_side",l.value),n.append("start_line",c.value),n.append("end_side",A.value),n.append("end_line",S.value),n.append("start_commit_oid",b.value),n.append("end_commit_oid",I.value),n.append("base_commit_oid",M.value),n)}r(Zt,"paramsForSuggestionButton");async function tt(e){const t=e.querySelector(".js-suggestion-button-placeholder");if(!t)return;const n=t.getAttribute("data-src-base");if(!n)return;const s=new URL(n,window.location.origin),o=t.closest(".js-inline-comment-form")||t.closest(".js-comment-update");if(!(o instanceof HTMLFormElement))return;const i=Zt(s,o);if(!i)return;s.search=i.toString();const l=await(0,m.a)(document,s.toString());t.innerHTML="",t.appendChild(l)}r(tt,"loadSuggestionButton"),document.addEventListener("inlinecomment:collapse",()=>{et()});function Kt(e,t,n){const s=e.querySelector(`.js-line-comments.${t}`);if(s)return s;const o=Oe("js-inline-comments-split-form-container-template",n).firstElementChild;o.classList.add(t);const i=e.querySelectorAll(`.${t}`);i[i.length-1].after(o);for(const c of i)c.remove();return o}r(Kt,"expandLineCommentsEmptyCells");function Gt(e){let t=Xe(e,".js-inline-comments-container");if(t)return t;{const n="js-inline-comments-split-container-template",s=document.getElementById(n);if(!s)throw new Error(`Could not find element with id ${n}`);if(!(s instanceof HTMLTemplateElement))throw new Error(`Found element with id ${n} - but was not a Template`);return t=new G.R(s,{}).firstElementChild,e.after(t),t}}r(Gt,"inlineCommentsSplitContainerForLine");function nt(e,t,n,s){if(e.classList.remove("color-bg-success","color-bg-danger"),s){e.textContent=t;return}if(n==="right"){e.classList.add("color-fg-success"),e.textContent=`+${t}`;return}if(n==="left"){e.classList.add("color-fg-danger"),e.textContent=`-${t}`;return}e.textContent=String(t)}r(nt,"applyMultiLinePreview");const st={R:"right",L:"left"};function Xt(e,t){const n=(0,ye.vu)();if(!n||n.end.is(n.start))return;if(!(0,ye.Oz)(t,n)){(0,ye.MO)();return}const{start:{lineNumber:s},end:{lineNumber:o}}=n;let{start:{side:i},end:{side:l}}=n;const c=Number(t.getAttribute("data-line")),A=t.getAttribute("data-side");if(c!==o||!n.end.isContext()&&A!==st[l]){(0,ye.MO)();return}const S=st[i],b=e.elements.namedItem("start_line"),I=e.elements.namedItem("start_side"),M=e.elements.namedItem("line"),$=e.elements.namedItem("side"),U=e.elements.namedItem("preview_start_side"),Z=e.elements.namedItem("preview_side");if(b instanceof HTMLInputElement&&I instanceof HTMLInputElement&&M instanceof HTMLInputElement&&$ instanceof HTMLInputElement&&U instanceof HTMLInputElement&&Z instanceof HTMLInputElement){b.value=String(s),I.value=S,I.value=U.value=I.value,Z.value=$.value;const B=b.value;i=I.value;const te=M.value;l=$.value;const oe=e.closest(".js-inline-comment-form-container");if(B&&te){const he=oe.querySelector(".js-multi-line-preview"),Dt=he.querySelector(".js-multi-line-preview-start"),se=he.querySelector(".js-multi-line-preview-end"),fe=n.start.isContext(),Gn=n.end.isContext();nt(Dt,B,i,fe),nt(se,te,l,Gn),he.hidden=!1,oe.classList.add("is-multiline")}else oe.querySelector(".js-multi-line-preview").hidden=!0,oe.classList.remove("is-multiline");Ze(oe)}}r(Xt,"fillMultilineFormFields");function ot(e,t){var n;const s=["type","path","position","line","side","original-line"];for(const i of s){const l=e.elements.namedItem(i);if(l instanceof HTMLInputElement){const c=t.getAttribute(`data-${i}`)||"";l.value=c}}const o=(n=e.getElementsByClassName("js-expanded-diff-placeholder-value"))==null?void 0:n[0];if(o instanceof HTMLInputElement){const i=t.getAttribute("data-expanded-diff")||"";o.value=i}Xt(e,t)}r(ot,"fillTemplateFormFields");function Oe(e,t){const n=document.getElementById(e);if(!n)throw new Error(`Could not find element with id ${e}`);if(!(n instanceof HTMLTemplateElement))throw new Error(`Found element with id ${e} - but was not a Template`);return new G.R(n,{anchor:t.getAttribute("data-anchor")||"",position:t.getAttribute("data-position")||"",sequence:Nt++})}r(Oe,"renderCommentTemplate");var je=f(79046),me=f(14037),Yt=f(17364);(0,u.N7)(".js-diff-progressive-container",function(e){it(e);const t=e.querySelector(".js-diff-progressive-loader");!t||t.addEventListener("load",function(){it(e)})});function Jt(e,t){var n;const s=e.querySelectorAll(".js-comment-container");for(const o of s){const i=o.getAttribute("data-hidden-comment-ids");if(i){const l=i.split(","),c=(n=t.match(/\d+/g))==null?void 0:n[0];if(c&&l.includes(c)){(0,Yt.$)(o);break}}}}r(Jt,"loadResolvedComments");function it(e){const t=rt();if(!t)return;lt(e,t);const n=en(e,t);!n||((0,x.zT)(n),ct(n))}r(it,"processProgressiveContainer"),(0,u.N7)(".js-diff-load-container",function(e){const t=e.querySelector(".js-diff-entry-loader");!t||t.addEventListener("load",function(){e.closest(".js-file").classList.remove("hide-file-notes-toggle");const s=rt();!s||lt(e,s)})}),(0,d.on)("click",".js-diff-load",function(e){if(e.target.classList.contains("js-ignore-this"))return;const t=e.currentTarget.closest(".js-diff-load-container");ct(t)});function rt(){return window.location.hash.slice(1)}r(rt,"urlAnchor");function lt(e,t){let n;t.match(/^diff-.+[LR]\d+-[LR]\d+/)?n=(0,me.Q)(e.ownerDocument,t.substring(0,t.indexOf("-",5))):n=(0,me.Q)(e.ownerDocument,t),n&&e.contains(n)?((0,je.O4)(n),(0,x.zT)(n)):Jt(e,t)}r(lt,"scrollToAnchor");function en(e,t){const n=tn(e,t);return n||nn(e,t)}r(en,"getEntryFromAnchor");function tn(e,t){const n=/^(diff-[0-9a-f]{32})(?:[L|R]\d+)?$/.exec(t);if(!n)return;const s=n[1],o=e.querySelector(`a[name='${s}']`);if(!o)return;const i=o.nextElementSibling;if(!(i&&!i.querySelector(".js-diff-load-container")))return i}r(tn,"getEntryFromDiffAnchor");function nn(e,t){const n=/^(?:r|commitcomment-)(\d+)$/.exec(t);if(!n)return;const s=n[1],o=e.querySelector(`#diff-with-comment-${s}`);return o?o.closest(".js-file"):void 0}r(nn,"getEntryFromCommentAnchor");function ct(e){const t=e.querySelector(".js-diff-entry-loader"),n=e.querySelector(".js-diff-placeholder"),s=e.querySelector("button.js-diff-load"),o=e.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),o.textContent=s.getAttribute("data-disable-with")||"",s.disabled=!0;const i=new URL(t.getAttribute("data-fragment-url")||"",window.location.origin);return t.src=i.toString(),t.data}r(ct,"loadDiff");var sn=f(40728);(0,d.on)("click",".js-rendered, .js-source",function(e){const t=e.currentTarget;if(t.classList.contains("selected")){e.preventDefault();return}on(t),rn(t)}),(0,L.AC)(".js-prose-diff-toggle-form",async function(e,t){const n=e.closest(".js-details-container"),s=n.querySelector(".js-file-content"),o=await t.html();for(;s.lastChild;)s.removeChild(s.lastChild);s.append(o.html),n.classList.toggle("display-rich-diff"),n.classList.toggle("show-inline-notes")});function on(e){const t=e.closest(".js-file-header"),n=e.classList.contains("js-rendered"),s=e.classList.contains("js-source"),o=t.getAttribute("data-short-path"),i=t.getAttribute("data-anchor"),l=new URL(window.location.href,window.location.origin),c=new URLSearchParams(l.search.slice(1));l.hash=i,n?c.set("short_path",o):s&&c.delete("short_path"),l.search=c.toString(),(0,sn.lO)(null,"",l.toString())}r(on,"updateWindowLocation");function rn(e){for(const t of document.querySelectorAll(".js-rendered, .js-source"))t.classList.remove("selected"),t.removeAttribute("aria-current");e.classList.add("selected"),e.setAttribute("aria-current","true")}r(rn,"updateSelectedButton"),(0,d.on)("click",".js-toc-retry",function(e){if(!(e.target instanceof Element))return;const n=e.target.closest(".select-menu").querySelector("include-fragment"),s=n.getAttribute("src");n.setAttribute("src",""),n.setAttribute("src",s)});var ln=f(43682);function at(e,t,n){const s=Array.from(e.querySelectorAll('[role="menuitem"]'));let o=s.indexOf(t),i=s.indexOf(n);if(o===-1)throw new Error("Couldn't find startIndex in container");if(i===-1)throw new Error("Couldn't find endItem in container");dt(e),s[i].classList.add("is-last-in-range"),o>i&&([o,i]=[i,o]);for(const l of s.slice(o,i+1))l.classList.add("is-range-selected")}r(at,"highlightSelectedRange");async function cn(e,t){function n(s){at(e,t,s.target.closest('[role="menuitem"]'))}r(n,"highlightRange"),at(e,t,t),e.addEventListener("mouseover",n),await new Promise(s=>window.addEventListener("keyup",s,{once:!0})),e.removeEventListener("mouseover",n),dt(e)}r(cn,"observeShiftRangeHighlights");function dt(e){for(const t of e.querySelectorAll('[role="menuitem"]'))t.classList.remove("is-range-selected","is-last-in-range")}r(dt,"resetHighlight"),(0,u.N7)(".js-diffbar-range-menu .js-diffbar-range-list",{subscribe:an});function an(e){const t=e.closest("details-menu");let n=!1;function s(i){n=i.shiftKey,n&&i.preventDefault()}r(s,"clicked");function o(i){if(!n)return;i.preventDefault();const l=i.detail.relatedTarget;if(l.classList.contains("is-range-selected")){i.stopPropagation();const c=e.querySelectorAll(".is-range-selected"),A=c[0],S=c[c.length-1],b=e.getAttribute("data-range-url"),I=A.getAttribute("data-parent-commit"),M=S.getAttribute("data-commit"),$=I&&M?`${I}..${M}`:M,U=b.replace("$range",$);(0,ln.ZP)({url:U,container:document.querySelector("#js-repo-pjax-container")})}else i.stopImmediatePropagation(),cn(e,l)}return r(o,"selected"),e.addEventListener("click",s,{capture:!0}),t.addEventListener("details-menu-select",o),{unsubscribe:()=>{e.removeEventListener("click",s,{capture:!0}),t.removeEventListener("details-menu-select",o)}}}r(an,"manageRangeHighlight"),(0,d.on)("toggle",".js-diffbar-range-menu",function(e){const t=e.currentTarget;if(!t.hasAttribute("open"))return;const n=t.querySelector(".in-range");n&&n.focus()},{capture:!0});var ut=f(12585);(0,d.on)("click",".js-compare-tab",function(e){for(const s of document.querySelectorAll(".js-compare-tab.selected"))s.classList.remove("selected");e.currentTarget.classList.add("selected");for(const s of document.querySelectorAll("#commits_bucket, #files_bucket, #commit_comments_bucket"))s.classList.add("d-none");const n=e.currentTarget.hash;document.querySelector(n).classList.remove("d-none"),e.preventDefault()}),(0,C.Z)(function({target:e}){if(!(e instanceof HTMLElement))return;const t=e.closest("#commits_bucket, #files_bucket, #commit_comments_bucket");t&&t instanceof HTMLElement&&!(0,ut.Z)(t)&&document.querySelector(`.js-compare-tab[href="#${t.id}"]`).click()}),(0,d.on)("click",".js-toggle-range-editor-cross-repo",function(){document.querySelector(".js-range-editor").classList.toggle("is-cross-repo")}),(0,d.on)("pjax:click",".js-range-editor",function(e){const t=document.querySelector(".js-compare-pr");if(t&&t.classList.contains("open")){const n=e.detail.options,s=new URL(n.url,window.location.origin);s.search.match(/expand=1/)||(s.search+=`${s.search?"&":""}expand=1`,n.url=s.toString())}}),(0,u.N7)(".js-compare-pr.open",{add(){document.body.classList.add("is-pr-composer-expanded")},remove(){document.body.classList.remove("is-pr-composer-expanded")}}),(0,d.on)("change",".js-collab-checkbox",function({currentTarget:e}){const t=e.form;for(const o of t.querySelectorAll(".errored"))o.classList.remove("errored");const s=e.closest(".js-collab-option").querySelector(".js-status-indicator");s.classList.remove("status-indicator-success","status-indicator-failed"),s.classList.add("status-indicator-loading")}),(0,L.AC)(".js-collab-form",async function(e,t){try{await t.text()}catch{for(const s of e.querySelectorAll(".status-indicator-loading")){s.classList.remove("status-indicator-loading"),s.classList.add("status-indicator-failed");const o=s.closest(".js-collab-option");o.classList.add("errored");const i=o.querySelector(".js-collab-checkbox");i.checked=!i.checked}for(const s of e.querySelectorAll(".status-indicator-success"))s.classList.remove("status-indicator-success");return}for(const n of e.querySelectorAll(".errored"))n.classList.remove("errored");for(const n of e.querySelectorAll(".status-indicator-loading"))n.classList.remove("status-indicator-loading"),n.classList.add("status-indicator-success")});var Q=f(90420),ft=f(3447),dn=Object.defineProperty,un=Object.getOwnPropertyDescriptor,ne=r((e,t,n,s)=>{for(var o=s>1?void 0:s?un(t,n):t,i=e.length-1,l;i>=0;i--)(l=e[i])&&(o=(s?l(t,n,o):l(o))||o);return s&&o&&dn(t,n,o),o},"__decorateClass"),mt=r((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},"__accessCheck"),ge=r((e,t,n)=>(mt(e,t,"read from private field"),n?n.call(e):t.get(e)),"__privateGet"),ke=r((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},"__privateAdd"),Ie=r((e,t,n,s)=>(mt(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),"__privateSet"),Le,Ae,Me,Ee;let ee=r(class extends HTMLElement{constructor(){super(...arguments);this.sidebarHidden=!1,ke(this,Le,null),ke(this,Ae,null),ke(this,Me,void 0),ke(this,Ee,void 0),this.handleSidebarScroll=()=>{Ie(this,Le,requestAnimationFrame(this.updateSidebarHeight))},this.updateSidebarHeight=()=>{if(!this.sidebarContainer)return;const e=document.documentElement.clientHeight,t=this.diffToolbar.getBoundingClientRect(),n=this.mainContainer.getBoundingClientRect(),s=e>=n.bottom,o=t.top===0;let i;s?i=n.bottom-parseInt(this.sidebarContainer.style.top):o?i=e-t.height:i=e-parseInt(this.sidebarContainer.style.top),this.sidebarContainer.style.height=`${i}px`}}connectedCallback(){if(!this.sidebarContainer)return;Ie(this,Ee,new MutationObserver(this.handleNotificationShelfMutation)),ge(this,Ee).observe(document.body,{subtree:!0,childList:!0});const{signal:e}=Ie(this,Me,new AbortController);window.addEventListener("scroll",this.handleSidebarScroll,{signal:e}),window.addEventListener("resize",()=>this.handleSidebarResize(),{signal:e}),this.handleSidebarScroll()}disconnectedCallback(){var e;!this.sidebarContainer||(ge(this,Ee).disconnect(),(e=ge(this,Me))==null||e.abort(),ge(this,Le)!=null&&cancelAnimationFrame(ge(this,Le)),ge(this,Ae)!=null&&cancelAnimationFrame(ge(this,Ae)))}toggleSidebar(e){if(this.layoutContainer.classList.toggle("hx_Layout--sidebar-hidden"),this.sidebarHidden=!this.sidebarHidden,!this.fileTree)return;const t=e.detail.toggleButton;!t||(this.fileTree.instrumentToggleFileTree(t),!!this.fileTreePathFilter&&t.id==="show-file-tree-button"&&this.fileTreePathFilter.focus())}handleOpenFilesListHotkeyEvent(){if(this.shouldOpenTocMenu()){this.tocMenuButton.click();return}!this.fileTree||(this.showFileTreeButton&&this.sidebarHidden?this.showFileTreeButton.click():this.fileTreePathFilter&&!this.sidebarHidden&&this.fileTreePathFilter.focus())}shouldOpenTocMenu(){return!!(this.tocMenu&&!this.tocMenu.hasAttribute("open")&&window.getComputedStyle(this.tocMenu).display!=="none")}handleNotificationShelfMutation(e){const t=document.firstElementChild;if(!!t.classList.contains("js-skip-scroll-target-into-view"))for(const n of e){for(const s of n.addedNodes)if(s instanceof HTMLElement&&s.classList.contains("js-notification-top-shelf")){t.classList.add("has-notification-top-shelf");break}for(const s of n.removedNodes)if(s instanceof HTMLElement&&s.classList.contains("js-notification-top-shelf")){t.classList.remove("has-notification-top-shelf");break}}}handleSidebarResize(){Ie(this,Ae,requestAnimationFrame(this.updateSidebarHeight))}},"DiffLayoutElement");Le=new WeakMap,Ae=new WeakMap,Me=new WeakMap,Ee=new WeakMap,ne([Q.Lj],ee.prototype,"sidebarHidden",2),ne([Q.fA],ee.prototype,"layoutContainer",2),ne([Q.fA],ee.prototype,"diffToolbar",2),ne([Q.fA],ee.prototype,"tocMenu",2),ne([Q.fA],ee.prototype,"tocMenuButton",2),ne([Q.fA],ee.prototype,"mainContainer",2),ne([Q.fA],ee.prototype,"sidebarContainer",2),ne([Q.fA],ee.prototype,"fileTree",2),ne([Q.fA],ee.prototype,"showFileTreeButton",2),ne([Q.fA],ee.prototype,"fileTreePathFilter",2),ne([(0,ft.D)(100)],ee.prototype,"handleSidebarResize",1),ee=ne([Q.Ih],ee),(0,d.on)("click",".js-split-diff-view",function(){const e=document.querySelector(".js-unified-diff-view-box"),t=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),s=document.querySelector(".js-unified-diff-view-option");t.classList.add("color-border-accent-emphasis"),t.classList.remove("color-border-default"),e.classList.remove("color-border-accent-emphasis"),e.classList.add("color-border-default"),s.checked=!1,n.checked=!0}),(0,d.on)("click",".js-unified-diff-view",function(){const e=document.querySelector(".js-unified-diff-view-box"),t=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),s=document.querySelector(".js-unified-diff-view-option");t.classList.remove("color-border-accent-emphasis"),t.classList.add("color-border-default"),e.classList.add("color-border-accent-emphasis"),e.classList.remove("color-border-default"),s.checked=!0,n.checked=!1});var fn=f(27034);(0,d.on)("details:toggled",".js-pull-merging",function({currentTarget:e}){const t=Array.from(e.querySelectorAll(".js-merge-pull-request")),n=t.some(ut.Z);for(const s of t)s.classList.toggle("is-dirty",n)}),(0,d.on)("click",".js-merge-box-try-again",async function({currentTarget:e}){const t=e.getAttribute("data-form-target");if(!["js-cleanup-branch-form","js-merge-branch-form","js-queue-branch-form","js-update-branch-form"].includes(t))return;const s=e.closest(".js-pull-merging").getElementsByClassName(t)[0];(0,d.f)(s,"submit")}),document.addEventListener("session:resume",function(e){const t=document.getElementById(e.detail.targetId);if(t){const n=t.closest(".js-merge-pull-request");if(n){const s=n.closest(".js-details-container");s&&s.classList.add("open")}}}),(0,d.on)("change",".js-admin-merge-override",function({currentTarget:e}){const t=e.closest(".js-merge-message-container"),n=e.checked,s=t.querySelector(".js-merge-box"),o=t.querySelector(".js-auto-merge-box"),i=t.querySelector(".js-merge-form"),l=t.querySelector(".js-auto-merge-form"),c=t.querySelector(".js-queue-branch-form"),A=t.querySelectorAll(".merge-box-button");s&&(s.hidden=!n),o&&(o.hidden=n),i&&(i.hidden=!n),l&&(l.hidden=n),c&&(c.hidden=n);for(const S of A)S.disabled=!n}),(0,d.on)("details-menu-selected",".js-update-branch-method-menu",mn,{capture:!0});function mn(e){const t=e.detail.relatedTarget,n=t.closest(".js-merge-pr");n.classList.toggle("is-updating-via-merge",t.value==="merge"),n.classList.toggle("is-updating-via-rebase",t.value==="rebase");const s=n.querySelector(".js-update-branch-type");s&&(s.value=t.value)}r(mn,"updateBranchUpdateMethod"),(0,d.on)("submit",".js-update-branch-form",function({currentTarget:e}){var t;const n=e.closest(".js-merge-pr"),s=n==null?void 0:n.querySelector(".btn-group-update-merge");s&&(s.disabled=!0);const o=n==null?void 0:n.querySelector(".btn-group-update-rebase");o&&(o.disabled=!0);const i=n==null?void 0:n.querySelector(".js-update-method-menu-button");i&&(i.classList.add("disabled","user-select-none"),i.setAttribute("aria-disabled","true"));const l=n==null?void 0:n.querySelector(".js-update-branch-method-menu");l&&((t=l==null?void 0:l.parentNode)==null||t.removeChild(l))}),(0,d.on)("details-menu-selected",".js-merge-method-menu",gn,{capture:!0});function gn(e){const t=e.detail.relatedTarget,n=t.closest(".js-merge-pr"),s=n.querySelector(".js-merge-pull-request"),o=n.querySelector(".js-merge-method-menu-button"),i=o.getAttribute("data-merge-button-class");o.classList.toggle("btn-danger",t.hasAttribute("data-dangerous-action")),i&&o.classList.toggle(i,!t.hasAttribute("data-dangerous-action"));const l=n.querySelector(".js-merge-title"),c=n.querySelector(".js-merge-message");l.defaultValue===l.value&&(l.defaultValue=l.value=t.getAttribute("data-input-title-value")),c.defaultValue===c.value&&(c.defaultValue=c.value=t.getAttribute("data-input-message-value")),n.classList.toggle("is-merging",t.value==="merge"),n.classList.toggle("is-squashing",t.value==="squash"),n.classList.toggle("is-rebasing",t.value==="rebase"),n.classList.toggle("is-merging-group",t.value==="group"),n.classList.toggle("is-merging-solo",t.value==="solo"),n.classList.toggle("is-merging-jump",t.value==="jump");const A=s.classList.contains("js-admin-override-merge")&&t.value==="merge"||s.classList.contains("js-admin-override-squash")&&t.value==="squash"||s.classList.contains("js-admin-override-rebase")&&t.value==="rebase",S=n.querySelector(".js-merge-type");S&&(S.value=t.value);const b=n.querySelectorAll(".js-merge-pull-request .js-merge-commit-button");for(const U of b)U.type=t.value===U.value?"submit":"button";s.classList.toggle("color-fg-danger",A);const I=n.closest(".js-pull-merging"),M=new URL(I.getAttribute("data-url"),window.location.origin),$=new URLSearchParams(M.search);$.set("merge_type",t.value),M.search=$.toString(),I.setAttribute("data-url",M.toString())}r(gn,"updateForMergeMethod"),(0,d.on)("details:toggled",".js-merge-pr",function(e){const n=e.currentTarget.querySelector(".js-merge-message");n&&(0,d.f)(n,"change")}),(0,u.N7)(".branch-action-item.js-details-container.open",{add(e){for(const t of e.querySelectorAll(".js-merge-review-section"))t.setAttribute("open","")},remove(e){for(const t of e.querySelectorAll(".js-merge-review-section"))t.removeAttribute("open")}}),(0,d.on)("toggle",".js-details-container .js-merge-review-section",function({currentTarget:e}){const t=e.closest(".js-details-container"),n=t.querySelectorAll(".js-merge-review-section").length,s=t.querySelectorAll(".js-merge-review-section[open]").length;s===0?(0,je.Qp)(t,{force:!1}):s===n&&(0,je.Qp)(t,{force:!0})},{capture:!0}),(0,u.N7)("poll-include-fragment[data-to-be-polled]",{constructor:fn.Z,add(e){function t(){e.src=e.getAttribute("data-to-be-polled"),e.removeAttribute("data-to-be-polled")}r(t,"onVisible"),document.hidden?document.addEventListener("visibilitychange",t,{once:!0}):t()}}),(0,d.on)("submit",".js-remove-from-queue-form",async e=>{const t=e.currentTarget;e.preventDefault();const n=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"application/json"}});n&&n.ok||(window.onbeforeunload=()=>{window.scrollTo({top:0})},window.location.reload())});var Pe=f(96776);let _e=!1;document.addEventListener("keydown",function(e){e.key==="Alt"&&(_e=!0)}),document.addEventListener("keyup",function(e){e.key==="Alt"&&(_e=!1)}),(0,d.on)("click",".js-toggle-outdated-comments",function(e){if(!(e instanceof MouseEvent&&e.altKey||_e)||!(e.currentTarget instanceof HTMLElement))return;const t=e.currentTarget,n=t.closest("details");function s(){const o=n.hasAttribute("open");for(const i of document.querySelectorAll(".js-toggle-outdated-comments"))i!==t&&i.closest("details").toggleAttribute("open",o)}r(s,"toggleAll"),setTimeout(()=>{(0,Pe.uQ)(t,s)})});function gt(){const e=document.querySelectorAll(".pull-request-ref-restore");for(let t=0;t<e.length;t++)e[t].classList.toggle("last",t===e.length-1)}r(gt,"syncLast"),(0,u.N7)(".pull-request-ref-restore",{add:gt,remove:gt});function ht(){const e=document.querySelector("#js-pull-restorable")!=null,t=document.querySelector(".js-pull-discussion-timeline");t&&t.classList.toggle("is-pull-restorable",e)}r(ht,"syncRestorable"),(0,u.N7)("#js-pull-restorable",{add:ht,remove:ht});var hn=f(52134);function pn(e,t){const n=e.closest(".js-review-state-classes"),s=document.querySelector(".js-review-changes");n.classList.toggle("is-review-pending",t>0);for(const o of document.querySelectorAll(".js-pending-review-comment-count"))o.textContent=String(t);for(const o of document.querySelectorAll(".js-pending-comment-count-type"))o instanceof HTMLElement&&(o.textContent=o.getAttribute(t===1?"data-singular-string":"data-plural-string"));if(t>0){s.textContent=s.getAttribute("data-pending-message")||"";const o=e.querySelector(".js-reviews-toggle");o.classList.add("anim-pulse-in"),o.addEventListener("animationend",()=>o.classList.remove("anim-pulse-in"),{once:!0})}else s.textContent=s.getAttribute("data-message")||""}r(pn,"updatePendingCommentsCount");function pt(e){const t=document.querySelector(".js-reviews-container");t&&setTimeout(()=>pn(t,e))}r(pt,"updatePendingHandler"),(0,L.AC)(".js-inline-comment-form",async function(e,t){const n=await t.text();pt(n.json.pendingReviewCommentsCount)}),(0,L.AC)(".js-pending-review-comment .js-comment-delete",async function(e,t){const n=await t.text();pt(n.json.pendingReviewCommentsCount)}),(0,L.AC)(".js-resolvable-timeline-thread-form",async function(e,t){try{const n=await t.html();e.closest(".js-resolvable-timeline-thread-container").replaceWith(n.html)}catch{(0,hn.v)()}}),(0,L.AC)(".js-toggle-user-reviewed-file-form",async function(e,t){const n=e.closest(".js-details-container"),s=!!n.querySelector(".js-reviewed-file"),o=n.classList.contains("open"),i=n.querySelector(".js-file-header"),l=i?i.getBoundingClientRect().top===60:!1;(!s&&o||s&&!o)&&((0,je.Qp)(n),l&&(0,x.zT)(n));const c=e.querySelector(".js-reviewed-toggle");s?(c.classList.remove("color-bg-accent","color-border-accent"),c.classList.add("color-fg-muted","color-border-default")):(c.classList.remove("color-fg-muted","color-border-default"),c.classList.add("color-bg-accent","color-border-accent"));const A=c.querySelector(".js-reviewed-checkbox");A.disabled=!0;const S=document.querySelector("progress-bar");S instanceof Fe&&(s?S.decrement():S.increment());const b=document.getElementById(`file-tree-item-${n.id}`);b&&b.toggleAttribute("data-file-user-viewed");const I=await t.html(),M=e.closest(".js-replace-file-header-review");M&&(M.replaceWith(I.html),n.toggleAttribute("data-file-user-viewed"))});function He(e){return e.getAttribute("ratio").split("/")}r(He,"parseRatio");function bt(e){if(e){const[t,n]=He(e),s=parseInt(t)/parseInt(n),o=e.querySelector(".js-review-progress"),i=e.querySelector(".js-review-count");o instanceof HTMLElement&&i&&(o.style.width=`${s*100}%`,i.textContent=`${t} / ${n}`)}}r(bt,"refresh");class Fe extends HTMLElement{static get observedAttributes(){return["ratio"]}attributeChangedCallback(t){t==="ratio"&&bt(this)}connectedCallback(){bt(this)}increment(){const[t,n]=He(this),s=Math.min(parseInt(t)+1,parseInt(n));this.setAttribute("ratio",`${s}/${n}`)}decrement(){const[t,n]=He(this),s=Math.min(parseInt(t)-1,parseInt(n));this.setAttribute("ratio",`${s}/${n}`)}}r(Fe,"ProgressBarElement"),window.customElements.get("progress-bar")||(window.ProgressBarElement=Fe,window.customElements.define("progress-bar",Fe));var bn=f(34782),yn=f(81654);document.addEventListener("pjax:end",function(){for(const e of document.querySelectorAll(".js-pull-refresh-on-pjax"))(0,qe.x0)(e)}),(0,u.N7)(".js-updating-pull-request-commits-count",{add(e){const t=e.textContent,n=document.querySelectorAll(".js-updateable-pull-request-commits-count");for(const s of n)s.textContent=t}}),(async()=>{if(await bn.x,window.performance&&window.performance.navigation&&window.performance.navigation.type===window.performance.navigation.TYPE_RELOAD){const e=document.getElementById("js-report-pull-request-refresh");e&&(0,yn.Fk)(e)}})();var yt=f(2699),vn=f(97105);function wn(e){const t=e.querySelector(".js-diff-entry-loader"),n=e.querySelector(".js-diff-placeholder"),s=e.querySelector("button.js-diff-load"),o=e.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),o.textContent=s.getAttribute("data-disable-with")||"",s.disabled=!0;const i=new URL(t.getAttribute("data-fragment-url")||"",window.location.origin);return t.src=i.toString(),t.data}r(wn,"expander_loadDiff");function Re(e){(0,je.O4)(e),(0,x.zT)(e)}r(Re,"scrollIntoView"),(0,C.Z)(r(function(){const t=Sn(window.location.hash);!t||(0,me.Q)(document,t.hashFragment)&&!t.lastLine||Ne(t,0)},"handleHashChange"));function Sn(e){if(!e)return;const t=(0,vn.s)(e);if(!t)return;const n=t[1],s=t[2],o=t[3],i=t[5],l=n+s+o,c=n+s;return{anchor:n,side:s,line:o,lastLine:i,hashFragment:l,partialHashFragment:c}}r(Sn,"parseExpansion");async function Ne(e,t){const{anchor:n,side:s,line:o,lastLine:i,hashFragment:l,partialHashFragment:c}=e,A=(0,me.Q)(document,n);if(!A)return;const S=A.nextElementSibling;if(!S)return;const b=St(S,s,o,i);if(!b.length){const U=(0,me.Q)(document,l);if(U){Re(U);return}const Z=S.querySelector(".js-diff-load-container");if(!Z)return;try{await wn(Z);const B=(0,me.Q)(document,l);B instanceof HTMLElement&&Re(B)}catch{Re(S)}return}await jn(b,c);const I=1,M=(0,me.Q)(document,l);St(S,s,o,i).length?Ne(e,t):M?Re(M):t<I&&Ne(e,t+1)}r(Ne,"findAndActivateExpander"),(0,d.on)("click",".js-expand",function(e){e.preventDefault(),vt(e.currentTarget)});function jn(e,t){return Promise.all(e.map(n=>vt(n,t)))}r(jn,"activateExpanders");async function vt(e,t){let n;if(t){const b=t.slice(-1)==="R"?"data-right-range":"data-left-range",I=e.getAttribute(b)||"",M=parseInt(I.split("-")[0],10);n=t+M}else n=e.hash.slice(1);const s=e.getAttribute("data-url"),o=new URL(s,window.location.origin),i=new URLSearchParams(o.search.slice(1));i.append("anchor",n),o.search=i.toString(),window.location.hash!==""&&window.history.replaceState(null,"","#");const l=await(0,m.a)(document,o.toString()),c=e.closest(".js-file");if(!c)return;const A=e.closest(".js-expandable-line"),S=wt(A,".file-diff-line");S?(0,Pe.uQ)(S,()=>{A.replaceWith(l)}):A.replaceWith(l),(0,d.f)(c,"expander:expanded"),Ln(c)}r(vt,"activateExpander");function wt(e,t){const n=e.nextElementSibling;return n instanceof HTMLElement&&n.matches(t)?n:null}r(wt,"expander_next");function St(e,t,n,s){const o=parseInt(n,10),i=parseInt(s||"",10);return Array.from(e.querySelectorAll(".js-expand")).filter(l=>{const c=t==="R"?"data-right-range":"data-left-range",A=(l.getAttribute(c)||"").split("-"),S=parseInt(A[0],10),b=parseInt(A[1],10);return S<=o&&o<=b||o<=S&&b<=i?!0:S<=i&&i<=b})}r(St,"findExpanders");function Ln(e){const t=e.querySelector(".js-expand-full-wrapper");if(!t)return;Array.from(e.querySelectorAll(".js-expand")).length===0&&t.parentElement.removeChild(t)}r(Ln,"removeExpandAllButton");async function An(e,t){const n=await self.fetch(t,{headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok)throw new Error(`Request to blob_expand failed with status code ${n.status}`);return(0,yt.t)((0,yt.P)(e),n,!0),(await n.json()).map(o=>({...o,content:(0,g.r)(e,o.content)}))}r(An,"fetchManySafeDocumentFragments"),(0,d.on)("click",".js-expand-full",async e=>{e.preventDefault();const t=e.currentTarget,n=t.closest(".file"),s=t.getAttribute("data-url"),o=Tn(n);if(o.length===0)return;const i=new URL(s,window.location.origin),l=new URLSearchParams(i.search.slice(1));for(const b of o)l.append("ranges[]last_left",b.left.start),l.append("ranges[]left",b.left.end),l.append("ranges[]left_hunk_size",b.left.size),l.append("ranges[]last_right",b.right.start),l.append("ranges[]right",b.right.end),l.append("ranges[]right_hunk_size",b.right.size),l.append("ranges[]position",b.position);i.search=l.toString();const c=await An(document,i.toString()),A=[...n.querySelectorAll(".js-expand")];for(const{content:b,position:I}of c){const M=parseInt(I,10),$=A[M];if(!$)return;const U=$.closest(".js-expandable-line"),Z=wt(U,".file-diff-line");Z?(0,Pe.uQ)(Z,()=>{U.after(b)}):U.after(b),U.setAttribute("hidden","true")}t.setAttribute("hidden","true");const S=n.querySelector(".js-collapse-diff");S&&S.removeAttribute("hidden"),n.classList.add("open"),n.classList.add("Details--on")}),(0,d.on)("click",".js-collapse-diff",e=>{const t=e.currentTarget,n=t.closest(".file"),s=[...n.querySelectorAll('.blob-expanded[data-expanded-full="true"]')];for(const l of s)l.parentElement.removeChild(l);const o=[...n.querySelectorAll(".js-expandable-line")];for(const l of o)l.removeAttribute("hidden");t.setAttribute("hidden","true");const i=n.querySelector(".js-expand-full");i&&i.removeAttribute("hidden")});function En(e,t){const s=new URL(e.getAttribute("data-url"),window.location.origin).searchParams;return{position:t.toString(),left:{start:s.get("last_left"),end:s.get("left"),size:s.get("left_hunk_size")},right:{start:s.get("last_right"),end:s.get("right"),size:s.get("right_hunk_size")}}}r(En,"getExpanderRange");function Tn(e){const n=Array.from(e.querySelectorAll(".js-expand")).map((i,l)=>En(i,l));let s=!1;const o=[];for(let i=0;i<n.length;i++){if(s){s=!1;continue}const l=n[i],c=n[i+1];s=c&&l.left.start===c.left.start&&l.left.end===c.left.end&&l.right.start===c.right.start&&l.right.end===c.right.end,o.push(l)}return o}r(Tn,"getAllHunkRanges");class Be{constructor(t){this.selection=t,this.anchorNode=t.anchorNode}range(){var t;let n;return((t=this.selection)==null?void 0:t.rangeCount)>0&&(n=this.selection.getRangeAt(0)),n}canBeSideProtected(){try{return!!(this.hasSelectedText()&&this.confinedTable())}catch{return!1}}isSideProtected(){var t;try{return!!((t=this.confinedTable())==null?void 0:t.getAttribute("data-lock-side-selection"))}catch{return!1}}hasSelectedText(){const t=this.range();return t?t.toString().length>0:!1}clearSelectedText(){this.selection.removeAllRanges()}confinedTable(){var t,n;const s=(n=(t=this.range())==null?void 0:t.commonAncestorContainer)==null?void 0:n.parentElement;return(s==null?void 0:s.matches(".diff-table"))?s:(s==null?void 0:s.matches(".js-file-content"))?s==null?void 0:s.querySelector("table.diff-table"):s==null?void 0:s.closest("table.diff-table")}unprotectedSide(){var t,n;let s;return this.anchorNode instanceof HTMLTableCellElement?s=this.anchorNode.closest("td[data-split-side]"):s=(n=(t=this.anchorNode)==null?void 0:t.parentElement)==null?void 0:n.closest("td[data-split-side]"),s==null?void 0:s.getAttribute("data-split-side")}protectedSide(){return this.unprotectedSide()==="left"?"right":"left"}applySideProtection(){if(this.unprotectedSide()){const t=this.confinedTable(),n=this.unprotectedSide();t&&n&&t.setAttribute("data-lock-side-selection",n)}}clearSideProtection(){const t=document.querySelectorAll("table[data-lock-side-selection]");for(const n of t)n.removeAttribute("data-lock-side-selection")}filteredTableRows(){const t=[];for(let n=0;n<this.selection.rangeCount;n++){const o=this.selection.getRangeAt(n).cloneContents();if(o.querySelectorAll("td").length){const i=`td[data-split-side=${this.protectedSide()}], td.js-linkable-line-number, td.empty-cell`,l=o.querySelectorAll(i);for(const c of l)c.parentNode&&c.parentNode.removeChild(c);t.push(...o.children)}else{const i=document.createElement("TR"),l=document.createElement("TD");l.append(...o.childNodes),i.append(l),t.push(i)}}return t}contentToString(){var t;const n=[],s=document.createElement("table");s.classList.add("invisible"),s.append(...this.filteredTableRows()),(t=this.confinedTable())==null||t.append(s);const o=s.children;for(let i=0;i<o.length;i++){const c=o[i].innerText;c&&(c===`
`?n.push(""):n.push(c))}return s.remove(),n.join(`
`)}}r(Be,"DiffTableSideProtection");function jt(e){return Math.floor(e/2)}r(jt,"tableSide");function xn(e){var t;const n=e.querySelector(".js-comment-button-placeholder");if(n==null?void 0:n.parentElement){const s=document.querySelector(".js-comment-button-template");if(!s)throw new Error("missing js-comment-button-template template element!");const o=n.dataset;if(!o)throw new Error("placeholder element has no dataset");o.originalLine=((t=e.querySelector(".blob-code-inner"))==null?void 0:t.textContent)||"";const i=new G.R(s,o);if(n.parentElement.replaceChild(i,n),o.expandedDiff){const l=e.querySelector(".js-add-line-comment");l&&l.setAttribute("data-expanded-diff",o.expandedDiff)}}}r(xn,"ensureCommentButton");function $e(e,t){const n=e.parentElement;!n||(xn(n),Cn(n,e,t))}r($e,"onHover");function Cn(e,t,n){const s=e.children;let o;if(s.length===4)for(let i=0,l=s.length;i<l;i++)s[i]===t&&(o=jt(i));for(let i=0,l=s.length;i<l;i++){const c=s[i];(o==null||jt(i)===o)&&c.classList.toggle("is-hovered",n)}}r(Cn,"updateIsHoveredClasses"),(0,u.N7)(".diff-table",function(e){let t=null;function n(){t&&$e(t,!1),t=null}r(n,"onMouseEnter");function s(l){t&&$e(t,!1),l.target instanceof HTMLElement&&(t=l.target.closest("td.blob-code"),t&&$e(t,!0))}r(s,"onMouseOver");function o(){e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",n),e.addEventListener("mouseover",s)}r(o,"add");function i(){e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",n),e.removeEventListener("mouseover",s)}return r(i,"remove"),{add:o,remove:i}});function Lt(e){var t;const n=document.getSelection();if(n){const s=new Be(n);s.isSideProtected()&&((t=e.clipboardData)==null||t.setData("text/plain",s.contentToString()),e.preventDefault())}}r(Lt,"copySidedContent");function At(e){const t=document.getSelection(),n=e.button===2;if(t&&!n){const s=new Be(t);s.isSideProtected()&&(s.clearSelectedText(),s.clearSideProtection())}}r(At,"clearSidedProtection");function Et(){const e=document.getSelection();if(e){const t=new Be(e);t.canBeSideProtected()?t.applySideProtection():t.clearSideProtection()}}r(Et,"protectSidedContent"),(0,u.N7)(".js-diff-container",function(){function e(){document.addEventListener("copy",Lt),document.addEventListener("mousedown",At),document.addEventListener("selectionchange",Et)}r(e,"add");function t(){document.removeEventListener("copy",Lt),document.removeEventListener("mousedown",At),document.removeEventListener("selectionchange",Et)}return r(t,"remove"),{add:e,remove:t}});var Yn=f(94673);function de(){const e=document.querySelector("meta[name=diff-view]"),t=e&&e instanceof HTMLMetaElement?e.content:"",n=document.querySelector(".js-file-diff-split"),s=!!(t==="split"&&n||document.querySelector(".wants-full-width-container"));document.body.classList.toggle("full-width",s)}r(de,"syncBodyClass"),(0,u.N7)("meta[name=diff-view]",{add:de,remove:de}),(0,u.N7)(".js-file-diff-split",{add:de,remove:de}),(0,u.N7)(".js-compare-tab.selected",{add:de,remove:de}),(0,u.N7)(".wants-full-width-container",{add:de,remove:de}),(0,d.on)("change",".js-toggle-file-notes",function(e){const t=e.currentTarget;t.closest(".file").classList.toggle("show-inline-notes",t.checked)});function Tt(e){const t=e.some(n=>n.checked);for(const n of e)(0,ve.Se)(n,!t)}r(Tt,"toggleCheckboxes"),(0,d.on)("click",".js-toggle-all-file-notes",function(e){const t=Array.from(document.querySelectorAll(".js-toggle-file-notes"));Tt(t),e.preventDefault()}),(0,d.on)("click",".js-toggle-all-file-annotations",function(e){const t=Array.from(document.querySelectorAll(".js-toggle-file-check-annotations"));Tt(t),e.preventDefault()}),(0,u.N7)(".js-inline-comments-container",function(e){let t;const n=e.closest(".file");if(n)return{add:t=r(function(){const o=n.querySelector(".js-inline-comments-container")!=null;n.classList.toggle("has-inline-notes",o)},"remove"),remove:t}}),(0,d.on)("change",".js-toggle-file-check-annotations",function(e){const t=e.currentTarget,n=t.closest(".file").querySelectorAll(".js-inline-annotations");for(const s of n)s instanceof HTMLElement&&(s.hidden=!t.checked)});var qn=Object.defineProperty,kn=Object.getOwnPropertyDescriptor,ue=r((e,t,n,s)=>{for(var o=s>1?void 0:s?kn(t,n):t,i=e.length-1,l;i>=0;i--)(l=e[i])&&(o=(s?l(t,n,o):l(o))||o);return s&&o&&qn(t,n,o),o},"diff_file_filter_element_decorateClass");let ce=r(class extends HTMLElement{connectedCallback(){this.filterState={hideDeletedFiles:!1,hideViewedFiles:!1,showManifestFilesOnly:!1,selectedOwners:[],showCodeownersFiles:!1,selectedFileTypes:[],fileTypeFilterActive:!1,filtersActive:!1}}applyFilter(e){this.filterState=e.detail,this.showResetFilters(),this.filterFiles(),this.filterTreeFiles(),this.hideEmptyDirectories(),this.showBlankslateIfEmpty()}filterFiles(){for(const e of this.diffEntries){const t=e.closest(".js-file.js-details-container");t.hidden=!this.shouldShowFile(e)}}filterTreeFiles(){for(const e of this.treeEntries){const t=this.shouldShowFile(e);e.hidden=!t,e.toggleAttribute("data-skip-substring-filter",!t)}}hideEmptyDirectories(){this.treeRoot&&this.hideEmptyDirectory(this.treeRoot)}hideEmptyDirectory(e){const t=e.getAttribute("data-tree-entry-type")==="root",n=e.getAttribute("data-tree-entry-type")==="directory";if(t||n){const s=e.querySelectorAll(t?":scope > .js-tree-node":":scope > ul > .js-tree-node");let o=0;for(const i of s)o=o+this.hideEmptyDirectory(i);return o===0?(e.hidden=!0,0):(e.hidden=!1,1)}return e.hidden?0:1}async refilterAfterAsyncLoad(){await Promise.resolve(),this.refilterLoadedFiles(),this.showBlankslateIfEmpty()}refilterLoadedFiles(){this.filterState.filtersActive&&this.filterFiles()}shouldShowFile(e){let t=!0;const n=e.getAttribute("data-file-type");return n&&(t=this.filterState.selectedFileTypes.includes(n)),this.filterState.hideViewedFiles&&t&&e.hasAttribute("data-file-user-viewed")&&(t=!1),this.filterState.showCodeownersFiles&&t&&(t=(e.getAttribute("data-codeowners")||"").split(",").filter(o=>this.filterState.selectedOwners.includes(o)).length>0),this.filterState.hideDeletedFiles&&t&&e.getAttribute("data-file-deleted")==="true"&&(t=!1),this.filterState.showManifestFilesOnly&&t&&(e.hasAttribute("data-file-manifest")||(t=!1)),t}showResetFilters(){this.resetFilters&&(this.resetFilters.hidden=!this.filterState.filtersActive)}showBlankslateIfEmpty(){if(!this.blankslate)return;if(this.progressiveLoaders.length>0){this.blankslate.hidden=!0;return}if(this.diffEntries.length===0){this.blankslate.hidden=!0;return}const e=Array.from(this.diffEntries).some(t=>!t.hidden);this.blankslate.hidden=e}},"DiffFileFilterElement");ue([Q.fA],ce.prototype,"blankslate",2),ue([Q.fA],ce.prototype,"resetFilters",2),ue([Q.GO],ce.prototype,"diffEntries",2),ue([Q.GO],ce.prototype,"progressiveLoaders",2),ue([Q.GO],ce.prototype,"treeEntries",2),ue([Q.fA],ce.prototype,"treeRoot",2),ue([(0,ft.D)(20)],ce.prototype,"hideEmptyDirectories",1),ce=ue([Q.Ih],ce);var In=f(51374),Mn=Object.defineProperty,Fn=Object.getOwnPropertyDescriptor,Rn=r((e,t,n,s)=>{for(var o=s>1?void 0:s?Fn(t,n):t,i=e.length-1,l;i>=0;i--)(l=e[i])&&(o=(s?l(t,n,o):l(o))||o);return s&&o&&Mn(t,n,o),o},"input_demux_context_wrapper_decorateClass");class xt{onItemSelected(t){if(!(t.currentTarget instanceof HTMLButtonElement))return;const n=t.currentTarget.querySelector(".js-ref-name").textContent,s=document.querySelector(".js-new-base-branch");s.value=btoa(n||"");const o=document.querySelector(".js-change-base-template").content.cloneNode(!0);o instanceof DocumentFragment&&(0,In.W)({content:o})}}r(xt,"InputDemuxBaseChangeContext");let Ct=r(class extends HTMLElement{connectedCallback(){const e=this.getAttribute("data-context-type"),t={baseChange:new xt};this.context=t[e]}onItemSelected(e){this.context.onItemSelected(e)}},"InputDemuxContextWrapperElement");Ct=Rn([Q.Ih],Ct);var Jn=f(9115),es=f(68906),ts=f(63355),Te=f(6216),qt=f(76745),Bn=f(95186),Dn=f(11178);let Ue=!1;function We(e,t){return document.querySelector(`#${e}LC${t}`)}r(We,"queryLineElement");function On({blobRange:e,anchorPrefix:t}){if(document.querySelectorAll(".js-file-line").length!==0&&(Pn(),!!e)){if(e.start.column===null||e.end.column===null)for(let s=e.start.line;s<=e.end.line;s+=1){const o=We(t,s);o&&o.classList.add("highlighted")}else if(e.start.line===e.end.line&&e.start.column!=null&&e.end.column!=null){const s=(0,Te.M9)(e,o=>We(t,o));if(s){const o=document.createElement("span");o.classList.add("highlighted"),(0,Dn.v)(s,o)}}}}r(On,"highlightLines");function Pn(){for(const e of document.querySelectorAll(".js-file-line.highlighted"))e.classList.remove("highlighted");for(const e of document.querySelectorAll(".js-file-line .highlighted")){const t=e.closest(".js-file-line");e.replaceWith(...e.childNodes),t.normalize()}}r(Pn,"clearHighlights");function _n(){const e=(0,Te.n6)(window.location.hash);On(e),Vn();const{blobRange:t,anchorPrefix:n}=e,s=t&&We(n,t.start.line);if(!Ue&&s){s.scrollIntoView();const o=s.closest(".blob-wrapper, .js-blob-wrapper");o.scrollLeft=0}Ue=!1}r(_n,"scrollLinesIntoView"),(0,C.Z)(function(){if(document.querySelector(".js-file-line-container")){setTimeout(_n,0);const e=window.location.hash;for(const t of document.querySelectorAll(".js-update-url-with-hash"))if(t instanceof HTMLAnchorElement)t.hash=e;else if(t instanceof HTMLFormElement){const n=new URL(t.action,window.location.origin);n.hash=e,t.action=n.toString()}}});function Hn(e){const t=[];for(const s of e)t.push(s.textContent);const n=document.getElementById("js-copy-lines");if(n instanceof qt.Z){n.textContent=`Copy ${e.length===1?"line":"lines"}`,n.value=t.join(`
`);const s=`Blob, copyLines, numLines:${e.length.toString()}`;n.setAttribute("data-ga-click",s)}}r(Hn,"setCopyLines");function Nn(e){const t=document.querySelector(".js-permalink-shortcut");if(t instanceof HTMLAnchorElement){const n=`${t.href}${window.location.hash}`,s=document.getElementById("js-copy-permalink");if(s instanceof qt.Z){s.value=n;const o=`Blob, copyPermalink, numLines:${e.toString()}`;s.setAttribute("data-ga-click",o)}return n}}r(Nn,"setPermalink");function $n(e,t){const n=document.getElementById("js-new-issue");if(n instanceof HTMLAnchorElement){if(!n.href)return;const s=new URL(n.href,window.location.origin),o=new URLSearchParams(s.search);o.set("permalink",e),s.search=o.toString(),n.href=s.toString(),n.setAttribute("data-ga-click",`Blob, newIssue, numLines:${t.toString()}`)}}r($n,"setOpenIssueLink");function Un(e,t){const n=document.getElementById("js-new-discussion");if(!(n instanceof HTMLAnchorElement)||!(n==null?void 0:n.href))return;const s=new URL(n.href,window.location.origin),o=new URLSearchParams(s.search);o.set("permalink",e),s.search=o.toString(),n.href=s.toString(),n.setAttribute("data-ga-click",`Blob, newDiscussion, numLines:${t.toString()}`)}r(Un,"setOpenDiscussionLink");function Wn(e){const t=document.getElementById("js-view-git-blame");!t||t.setAttribute("data-ga-click",`Blob, viewGitBlame, numLines:${e.toString()}`)}r(Wn,"setViewGitBlame");function Vn(){const e=document.querySelector(".js-file-line-actions");if(!e)return;const t=document.querySelectorAll(".js-file-line.highlighted"),n=t[0];if(n){Hn(t),Wn(t.length);const s=Nn(t.length);s&&$n(s,t.length),s&&Un(s,t.length),e.style.top=`${n.offsetTop-2}px`,e.classList.remove("d-none")}else e.classList.add("d-none")}r(Vn,"showOrHideLineActions");function zn(e){const t=window.scrollY;Ue=!0,e(),window.scrollTo(0,t)}r(zn,"preserveLineNumberScrollPosition"),(0,d.on)("click",".js-line-number",function(e){const t=(0,Te.n6)(e.currentTarget.id),{blobRange:n}=t,s=(0,Te.G5)(window.location.hash);s&&e.shiftKey&&(t.blobRange={start:s.start,end:n.end}),zn(()=>{window.location.hash=(0,Te.Dw)(t)})}),(0,d.on)("submit",".js-jump-to-line-form",function(e){const s=e.currentTarget.querySelector(".js-jump-to-line-field").value.replace(/[^\d-]/g,"").split("-").map(o=>parseInt(o,10)).filter(o=>o>0).sort((o,i)=>o-i);s.length&&(window.location.hash=`L${s.join("-L")}`),e.preventDefault()}),(0,u.N7)(".js-check-bidi",Kn);const Qn=/[\u202A-\u202E]|[\u2066-\u2069]/,kt={"\u202A":"U+202A","\u202B":"U+202B","\u202C":"U+202C","\u202D":"U+202D","\u202E":"U+202E","\u2066":"U+2066","\u2067":"U+2067","\u2068":"U+2068","\u2069":"U+2069"};function It(e,t){if(e.nodeType===Node.TEXT_NODE)return Zn(e,t);if(!e.childNodes||!e.childNodes.length)return!1;let n=!1;for(const s of e.childNodes)if(n||(n=It(s,t)),n&&!t)break;return n}r(It,"checkNodeForBidiCharacters");function Zn(e,t){let n=!1;if(e.nodeValue)for(let s=e.nodeValue.length-1;s>=0;s--){const o=e.nodeValue.charAt(s);if(kt[o]){if(n=!0,!t)break;const i=new G.R(t,{revealedCharacter:kt[o]}),l=new Range;l.setStart(e,s),l.setEnd(e,s+1),l.deleteContents(),l.insertNode(i)}}return n}r(Zn,"checkTextNodeForBidiCharacters");function Kn(e){let t=!1;const n=performance.now(),s=e.textContent||"";if(Qn.test(s)){const l=e.querySelectorAll(".diff-table .blob-code-inner, .js-file-line-container .js-file-line, .js-suggested-changes-blob .blob-code-inner"),c=document.querySelector(".js-line-alert-template"),A=document.querySelector(".js-revealed-character-template");for(const S of l)if(It(S,A)&&(t=!0,c)){const b=new G.R(c,{});e.getAttribute("data-line-alert")==="before"?S.before(b):S.after(b)}}const i={durationMs:(performance.now()-n).toString(),result:t.toString()};if((0,Bn.q)("blob_js_check_bidi_character",i),t){const l=document.querySelector(".js-file-alert-template");if(l){const c=new URL(window.location.href,window.location.origin);c.searchParams.get("h")==="1"?c.searchParams.delete("h"):c.searchParams.set("h","1");const A=new G.R(l,{revealButtonHref:c.href});e.prepend(A)}}e.classList.remove("js-check-bidi")}r(Kn,"alertOnBidiCharacter");class Mt{constructor(t,n){this.lineElement=t,this.numberElement=n}range(t,n){t=isNaN(t)?0:t,n=isNaN(n)?0:n;let s=null,o=0,i=0;for(const[c,A]of this.lineElement.childNodes.entries()){const S=(A.textContent||"").length;if(S>t&&!s&&(s=A,o=c),S>=n){i=c;break}t-=S,n-=S}const l=document.createRange();if(o===i){for(;s&&s.nodeName!=="#text";)s=s.childNodes[0];if(!s)return null;l.setStart(s,t),l.setEnd(s,n)}else l.setStart(this.lineElement,o),l.setEnd(this.lineElement,i+1);return l}}r(Mt,"CodeListingLine");class Ft{constructor(t){this.container=t}findLine(t){if(!t)return null;const n=this.container.querySelector(`.js-blob-rnum[data-line-number='${t}']`);if(!n)return null;let s=n.nextElementSibling;return!s||!s.classList.contains("js-file-line")?null:(s=s.querySelector(".js-code-nav-pass")||s,new Mt(s,n))}}r(Ft,"CodeListing");const Rt=new WeakMap;function Bt(e){const t=e.closest(".js-blob-code-container, .js-file-content"),n=e.querySelector(".js-codeowners-error-tooltip-template"),s=e.querySelector(".js-codeowners-error-line-alert-template");if(!t||!n||!s)return;const o=e.querySelectorAll(".js-codeowners-error"),i=new Ft(t);for(const l of o){if(Rt.get(l))continue;const c=l.getAttribute("data-line"),A=l.getAttribute("data-kind"),S=l.getAttribute("data-suggestion"),b=parseInt(l.getAttribute("data-start-offset")||"",10),I=parseInt(l.getAttribute("data-end-offset")||"",10),M=i.findLine(c),$=M==null?void 0:M.range(b,I);if(!M||!$)continue;let U=A;S&&(U+=`: ${S}`);const Z=document.createElement("SPAN");Z.className="error-highlight",$.surroundContents(Z);const B=new G.R(n,{message:U}).firstElementChild;$.surroundContents(B);const te=new G.R(s,{});M.numberElement.appendChild(te),Rt.set(l,!0)}}r(Bt,"annotateCodeownersErrors"),(0,u.N7)(".js-codeowners-errors",Bt),(0,d.on)("expander:expanded",".js-file",function(e){if(!e.target||!(e.target instanceof HTMLElement))return;const t=e.target.querySelector(".js-codeowners-errors");!t||Bt(t)})},95140:(z,_,f)=>{f.d(_,{j:()=>R,w:()=>C});var d=f(59753),x=f(78694),T=f(84570);(0,d.on)("click",".js-toggle-inline-comment-form",function(u){const v=u.currentTarget.closest(".js-line-comments");R(v)}),(0,d.on)("quote-selection",".js-line-comments",function(u){R(u.currentTarget),u.stopPropagation()}),(0,T.w4)("keydown",".js-inline-comment-form-container form .js-comment-field",function(u){const v=u.target;if(!v.classList.contains("js-navigation-enable")&&u.key==="Escape"&&v.value.length===0){const w=v.closest("form");C(w),u.preventDefault()}}),(0,d.on)("click",".js-hide-inline-comment-form",function(u){const v=u.currentTarget.closest("form");!(0,x.T)(v)||confirm(u.target.getAttribute("data-confirm-cancel-text"))?C(v):u.preventDefault()});function R(u){var v;const w=u.querySelector(".js-inline-comment-form-container");w.classList.add("open"),(v=w.querySelector(".js-write-tab"))==null||v.click(),w.querySelector(".js-comment-field").focus(),(0,d.f)(w,"inlinecomment:focus")}r(R,"focusForm");function C(u){u.reset();const v=u.closest(".js-inline-comment-form-container");v.classList.remove("open");const w=v.querySelector(".js-multi-line-preview");w&&(w.hidden=!0),(0,d.f)(v,"inlinecomment:collapse")}r(C,"blurForm")},51374:(z,_,f)=>{f.d(_,{W:()=>x});var d=f(59753);async function x(T){const C=document.querySelector("#site-details-dialog").content.cloneNode(!0),u=C.querySelector("details"),v=u.querySelector("details-dialog"),w=u.querySelector(".js-details-dialog-spinner");T.detailsClass&&u.classList.add(...T.detailsClass.split(" ")),T.dialogClass&&v.classList.add(...T.dialogClass.split(" ")),T.label?v.setAttribute("aria-label",T.label):T.labelledBy&&v.setAttribute("aria-labelledby",T.labelledBy),document.body.append(C);const a=await T.content;return w.remove(),v.prepend(a),u.addEventListener("toggle",()=>{u.hasAttribute("open")||((0,d.f)(v,"dialog:remove"),u.remove())}),v}r(x,"dialog")},96310:(z,_,f)=>{f.d(_,{X:()=>x});var d=f(40728);function x(T,R,C,u,v,w,a,p){const E=document.querySelector(".js-file-filter"),h=new URL(window.location.href,window.location.origin);if(!T&&!u)return R||w?void 0:(h.search="",(0,d.lO)((0,d.y0)(),"",h.toString()));const j=E.querySelector(".js-file-filter-form"),F=new FormData(j),y=C.filter(D=>!F.getAll("file-filters[]").includes(D)),O=v.filter(D=>!F.getAll("owned-by[]").includes(D));for(const D of y)F.append("file-filters[]",D);for(const D of O)F.append("owned-by[]",D);const q=new URLSearchParams(F);(!q.has("file-filters[]")||q.toString()==="")&&q.set("file-filters[]",""),R&&q.set("w","1"),w&&q.set("manifests","true"),a&&q.set("show-deleted-files","false"),p&&q.set("show-viewed-files","false"),q.delete("authenticity_token"),h.search=q.toString(),(0,d.lO)((0,d.y0)(),"",h.toString())}r(x,"updateURLState")},97105:(z,_,f)=>{f.d(_,{s:()=>d});function d(x){const T=x.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(T!=null&&T.length===6)return T;const R=x.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return R!=null&&R.length===6?R:null}r(d,"matchHash")},70497:(z,_,f)=>{f.d(_,{MO:()=>q,vu:()=>j,Oz:()=>y});var d=f(14037);class x{constructor(g,L,k){this.diffId=g,this.side=L,this.lineNumber=k,this.element=(0,d.Q)(document,this.anchor())}sideForCommenting(){return this.element&&this.element.classList.contains("blob-num-context")?"right":{R:"right",L:"left"}[this.side]}isContext(){return this.element?this.element.classList.contains("blob-num-context"):!1}anchor(){return`${this.diffId}${this.anchorSuffix()}`}anchorSuffix(){return`${this.side}${this.lineNumber}`}is(g){return this.diffId===g.diffId&&this.side===g.side&&this.lineNumber===g.lineNumber}}r(x,"DiffPosition");class T{constructor(g,L,k,N,P){this.elements=new Set,this.isParsed=!1,this.isSplit=!1,this._rows=new Set,this._isAcrossHunks=!1,this._isContextOnly=!0,this._includesExpandedLine=!1,this._commentOutsideTheDiff=!1,this.diffId=g,this.diffTable=document.querySelector(`.js-diff-table[data-diff-anchor="${g}"]`),this.diffTable&&(this.isSplit=this.diffTable.classList.contains("js-file-diff-split")),this.start=new x(g,L,k),this.end=new x(g,N,P),this.lineCount=0,this.parse()}anchor(){const g=[];return g.push(this.start.anchor()),this.start.is(this.end)||g.push(this.end.anchorSuffix()),g.join("-")}parse(){if(!this.diffTable)return;let g=this.unify(this.diffTable.querySelectorAll(".js-linkable-line-number"));g=this.filterInRange(g),this.lineCount=g.length,this.elements=this.expandRelatedElements(g),this._commentOutsideTheDiff=this.diffTable.classList.contains("js-comment-outside-the-diff"),this.isParsed=!0}unify(g){if(!this.isSplit)return Array.from(g);const L=[];let k=[],N=[];for(const P of g)P.classList.contains("blob-num-addition")?k.push(P):P.classList.contains("blob-num-deletion")?N.push(P):(L.push(...N,...k,P),k=[],N=[]);return L.push(...N,...k),L}filterInRange(g){if(!this.start.element||!this.end.element)return[];let L=g.indexOf(this.start.element),k=g.indexOf(this.end.element);if(L>k){[L,k]=[k,L];const[N,P]=[this.end,this.start];this.start=N,this.end=P}return g.slice(L,k+1)}isContextOnly(){return this.isParsed||this.parse(),this._isContextOnly}isAcrossHunks(){return this.isParsed||this.parse(),this._isAcrossHunks}includesExpandedLine(){return this.isParsed||this.parse(),this._includesExpandedLine}commentOutsideTheDiffEnabled(){return this.isParsed||this.parse(),this._commentOutsideTheDiff}rows(){return this.isParsed||this.parse(),this._rows}expandRelatedElements(g){const L=this.isSplit,k=g[0],N=g[g.length-1];if(k&&N){const V=k.closest("[data-hunk]"),H=N.closest("[data-hunk]");if(V&&H){const W=V.getAttribute("data-hunk"),J=H.getAttribute("data-hunk");W!==J&&(this._isAcrossHunks=!0)}}const P=r((V,H)=>{!this._includesExpandedLine&&H.closest(".blob-expanded")&&(this._includesExpandedLine=!0);const W=H.parentElement;W instanceof HTMLElement&&this._rows.add(W);const J=H.classList.contains("blob-num-deletion")||H.classList.contains("blob-num-addition");if(J&&(this._isContextOnly=!1),!W)return V;if(L&&J)return Array.from(W.children).indexOf(H)<2?V.add(W.children[0]).add(W.children[1]):V.add(W.children[2]).add(W.children[3]);for(const le of Array.from(W.children))V.add(le);return V},"expander");return g.reduce(P,new Set)}}r(T,"DiffRange");var R=f(70130),C=f(97105),u=f(64463),v=f(59753),w=f(81654);let a=null,p=null,E=!1,h=null;function j(){return a}r(j,"getCurrentRange");function F(m){return!!m.closest(".js-multi-line-comments-enabled")}r(F,"isMultiLineCommentingEnabled");function y(m,g){if(!F(m))return!1;const{start:{lineNumber:L},end:{lineNumber:k}}=g;return!(L===k&&g.isContextOnly()||!g.commentOutsideTheDiffEnabled()&&(g.isAcrossHunks()||g.includesExpandedLine()))}r(y,"isMultiLineCommentAllowed");function O(m){return m.closest(".js-diff-table").classList.contains("is-selecting")}r(O,"isSelecting");function q(){window.history.replaceState(null,"","#"),G()}r(q,"clearSelection");function D(m,g){let L=m.id;if(g){const k=(0,C.s)(L);if(!k)return;const N=k[1],P=k[2],V=k[3];if(a&&a.diffId===N){if(P===a.start.side&&V<a.start.lineNumber)return;const H=new T(N,a.start.side,a.start.lineNumber,P,+V);L=H.anchor();const W=m.closest(".js-file-content[data-hydro-view]");W instanceof HTMLElement&&ve(W,H),E&&O(m)&&m.closest(".js-diff-table").classList.toggle("is-commenting",y(m,H)),p=r(function(){if(y(m,H)){const le=`.js-add-line-comment[data-side="${H.end.sideForCommenting()}"]`,Se=m.closest("tr").querySelector(le);Se&&H&&Se.click()}},"showMultiLineCommentForm")}}window.history.replaceState(null,"",`#${L}`),G()}r(D,"setSelection");function K(m){if(!(m instanceof HTMLElement))return null;if(m.classList.contains("js-linkable-line-number"))return m;const g=m.previousElementSibling;return g?K(g):null}r(K,"nearestLinkableLineNumber");function Y(m){!a||m.target.closest(".js-diff-table")||(window.history.replaceState(null,"","#"),G())}r(Y,"handleClick");function ie(){if(!h)return;D(h,!1);const m=h.closest(".js-diff-table");h=null,m.classList.add("is-selecting"),m.classList.add("is-commenting"),document.addEventListener("mouseup",function(g){m.classList.remove("is-selecting"),m.classList.remove("is-selecting","is-commenting"),p&&p(),p=null,we(m),g.preventDefault()},{once:!0})}r(ie,"beginDrag");function re(m){const g=K(m);!g||!O(g)||D(g,!0)}r(re,"commentSelectionMouseverToCode");function pe(m){!O(m)||D(m,!0)}r(pe,"commentSelectionMouseverToLineNumbers");function xe(m){const g=m.target;if(!(g instanceof Element))return;h&&ie();const L=g.closest(".blob-code, .js-linkable-line-number");if(!!L){if(L.classList.contains("blob-code"))return re(L);L.classList.contains("js-linkable-line-number")&&pe(L)}}r(xe,"handleDragMouseEvent");function Ce(m){m.addEventListener("mouseenter",xe,{capture:!0})}r(Ce,"addCommentSelectionEvents");function we(m){E=!1,m.removeEventListener("mouseenter",xe,{capture:!0}),setTimeout(()=>{document.addEventListener("click",Y,{once:!0})},0)}r(we,"removeCommentSelectionEvents"),(0,v.on)("mousedown",".js-add-line-comment",function(m){if(!(m instanceof MouseEvent)||m.button!==0)return;const g=m.target.parentElement;if(!g||!F(m.target))return;const L=K(g);if(!L)return;const k=m.target.closest(".js-diff-table");Ce(k),h=L,E=!0,m.target.addEventListener("mouseup",function(){we(k),h=null,E=!1},{once:!0}),a&&a.lineCount>1&&m.preventDefault()}),(0,v.on)("mousedown",".js-linkable-line-number",function(m){if(!(m instanceof MouseEvent)||m.button!==0)return;const g=m.target;if(!(g instanceof Element))return;const L=g.closest(".js-diff-table");L.classList.add("is-selecting"),Ce(L),document.addEventListener("mouseup",function(){g.closest(".js-diff-table").classList.remove("is-selecting"),we(L)},{once:!0}),D(g,m instanceof MouseEvent&&m.shiftKey),m.preventDefault()});function be(){if(!a)return;for(const P of a.elements)P.classList.add("selected-line");const m=[],g=[],L=[],k=[];for(const P of a.rows()){const[V,H,W,J]=P.children;m.push(V),g.push(H),L.push(W),k.push(J)}function N(P){for(const[V,H]of P.entries()){if(H.classList.contains("empty-cell"))continue;const W=P[V-1];(!W||!W.classList.contains("selected-line"))&&H.classList.add("selected-line-top");const J=P[V+1];(!J||!J.classList.contains("selected-line"))&&H.classList.add("selected-line-bottom")}}r(N,"doBorder"),N(m),N(g),N(L),N(k);for(const[P,V]of g.entries())k[P].classList.contains("selected-line")||V.classList.add("selected-line-right");for(const[P,V]of L.entries())g[P].classList.contains("selected-line")||V.classList.add("selected-line-left")}r(be,"drawBorderForSplit");function ye(){if(!a)return;for(const k of a.elements)k.classList.add("selected-line");const m=Array.from(a.rows()),g=m[0];for(const k of g.children)k.classList.add("selected-line-top");const L=m[m.length-1];for(const k of L.children)k.classList.add("selected-line-bottom")}r(ye,"drawBorderForUnified");function G(){if(a){for(const W of a.elements)W.classList.remove("selected-line","selected-line-top","selected-line-bottom","selected-line-left","selected-line-right");a=null}const m=(0,C.s)(window.location.hash);if(!m)return;const g=m[1],L=m[2],k=m[3],N=m[4]||L,P=m[5]||k;a=new T(g,L,+k,N,+P);const H=Array.from(a.elements)[0];!H||(H.closest(".js-diff-table").classList.contains("file-diff-split")?be():ye())}r(G,"showHighlight");function ve(m,g){const L={starting_diff_position:g.start.side+g.start.lineNumber,ending_diff_position:g.end.side+g.end.lineNumber,line_count:g.lineCount};m.setAttribute("data-hydro-client-context",JSON.stringify(L)),(0,w.Fk)(m)}r(ve,"sendHydroEvent"),(0,R.Z)(G),(0,u.N7)(".blob-expanded",G),(0,u.N7)(".js-diff-progressive-loader",function(m){m.addEventListener("load",G)}),(0,u.N7)(".js-diff-entry-loader",function(m){m.addEventListener("load",G)})},94673:(z,_,f)=>{var d=f(59753);(0,d.on)("click",".js-rich-diff.collapsed .js-expandable",function(x){if(!(x.target instanceof Element))return;x.preventDefault(),x.target.closest(".js-rich-diff").classList.remove("collapsed")}),(0,d.on)("click",".js-show-rich-diff",function(x){const T=x.currentTarget.closest(".js-warn-no-visible-changes");if(!T)return;T.classList.add("d-none");const C=T.parentElement.querySelector(".js-no-rich-changes");C&&C.classList.remove("d-none")})},78694:(z,_,f)=>{f.d(_,{M:()=>T,T:()=>R});var d=f(14840),x=f(82036);function T(y,O=!1){return R(y)||p(y,O)||j(y)||F(y)}r(T,"hasInteractions");function R(y){for(const O of y.querySelectorAll("input, textarea"))if((O instanceof HTMLInputElement||O instanceof HTMLTextAreaElement)&&C(O))return!0;return!1}r(R,"hasDirtyFields");function C(y){if(y instanceof HTMLInputElement&&(y.type==="checkbox"||y.type==="radio")){if(y.checked!==y.defaultChecked)return!0}else if(y.value!==y.defaultValue)return!0;return!1}r(C,"formFieldValueChanged");let u;async function v(y,O){u=y;try{await O()}finally{u=null}}r(v,"withActiveElement");function w(y){return u instanceof Element?u:y&&y.ownerDocument&&y.ownerDocument.activeElement?y.ownerDocument.activeElement:null}r(w,"getActiveElement");let a;document.addEventListener("mouseup",function(y){a=y.target});function p(y,O){const q=w(y);return q===null||O&&q===y?!1:q===y&&(0,x.sw)(q)||y.contains(q)&&!h(q)?!0:a instanceof Element&&y.contains(a)&&!!a.closest("details[open] > summary")}r(p,"hasFocus");const E="a[href], button";function h(y){var O;if(y instanceof d.Z)return!0;const q=y instanceof HTMLAnchorElement||y instanceof HTMLButtonElement,D=(O=y.parentElement)==null?void 0:O.classList.contains("task-list-item");if(q&&D)return!0;if(!(a instanceof Element))return!1;const K=y.closest(E);if(!K)return!1;const Y=a.closest(E);return K===Y}r(h,"activeElementIsSafe");function j(y){return y.matches(":active:enabled")}r(j,"hasMousedown");function F(y){return!!(y.closest(".is-dirty")||y.querySelector(".is-dirty"))}r(F,"markedAsDirty")},96776:(z,_,f)=>{f.d(_,{_8:()=>d,uQ:()=>x});function d(C,u){return x(T(C),u)}r(d,"preserveAnchorNodePosition");function x(C,u){var v=C;if(!v)return Promise.resolve(u());var w=v.ownerDocument.documentElement;function a(h){for(var j=[];h;){var F=h.getBoundingClientRect(),y=F.top,O=F.left;j.push({element:h,top:y,left:O}),h=h.parentElement}return j}r(a,"computeAncestorBoundingRects");function p(h){for(var j=0;j<h.length;j++){var F=h[j];if(w.contains(F.element))return F}}r(p,"firstAttachedBoundingRect");var E=a(v);return Promise.resolve(u()).then(function(h){var j=p(E);if(j){v=j.element;var F=j.top,y=j.left,O=v.getBoundingClientRect(),q=O.top,D=O.left;R(v,D-y,q-F)}return h})}r(x,"preservePosition");function T(C){if(C.activeElement!==C.body)return C.activeElement;var u=C.querySelectorAll(":hover"),v=u.length;if(v)return u[v-1]}r(T,"findAnchorNode");function R(C,u,v){var w=C.ownerDocument,a=w.defaultView;function p(q){return q.offsetParent?{top:q.scrollTop,left:q.scrollLeft}:{top:a.pageYOffset,left:a.pageXOffset}}r(p,"scrollOffsets");function E(q,D,K){if(D===0&&K===0)return[0,0];var Y=p(q),ie=Y.top+K,re=Y.left+D;q===w||q===a||q===w.documentElement||q===w.body?w.defaultView.scrollTo(re,ie):(q.scrollTop=ie,q.scrollLeft=re);var pe=p(q);return[pe.left-Y.left,pe.top-Y.top]}r(E,"scrollBy");function h(q){var D=q;if(!(!D.offsetParent||D===w.body)){for(;D!==w.body;){if(D.parentElement)D=D.parentElement;else return;var K=a.getComputedStyle(D),Y=K.position,ie=K.overflowY,re=K.overflowX;if(Y==="fixed"||ie==="auto"||re==="auto"||ie==="scroll"||re==="scroll")break}return D}}r(h,"overflowParent");for(var j=h(C),F=0,y=0;j;){var O=E(j,u-F,v-y);if(F+=O[0],y+=O[1],F===u&&y===v)break;j=h(j)}}r(R,"cumulativeScrollBy")},86058:(z,_,f)=>{f.d(_,{R:()=>v});function d(){let w;try{w=window.top.document.referrer}catch{if(window.parent)try{w=window.parent.document.referrer}catch{}}return w===""&&(w=document.referrer),w}r(d,"getReferrer");function x(){try{return`${screen.width}x${screen.height}`}catch{return"unknown"}}r(x,"getScreenResolution");function T(){let w=0,a=0;try{return typeof window.innerWidth=="number"?(a=window.innerWidth,w=window.innerHeight):document.documentElement!=null&&document.documentElement.clientWidth!=null?(a=document.documentElement.clientWidth,w=document.documentElement.clientHeight):document.body!=null&&document.body.clientWidth!=null&&(a=document.body.clientWidth,w=document.body.clientHeight),`${a}x${w}`}catch{return"unknown"}}r(T,"getBrowserResolution");function R(){return navigator.languages?navigator.languages.join(","):navigator.language||""}r(R,"getBrowserLanguages");function C(){return{referrer:d(),user_agent:navigator.userAgent,screen_resolution:x(),browser_resolution:T(),browser_languages:R(),pixel_ratio:window.devicePixelRatio,timestamp:Date.now(),tz_seconds:new Date().getTimezoneOffset()*-60}}r(C,"getRequestContext");var u=f(82918);class v{constructor(a){this.options=a}get collectorUrl(){return this.options.collectorUrl}get clientId(){return this.options.clientId?this.options.clientId:(0,u.b)()}createEvent(a){return{page:location.href,title:document.title,context:{...this.options.baseContext,...a}}}sendPageView(a){const p=this.createEvent(a);this.send({page_views:[p]})}sendEvent(a,p){const E={...this.createEvent(p),type:a};this.send({events:[E]})}send({page_views:a,events:p}){const E={client_id:this.clientId,page_views:a,events:p,request_context:C()},h=JSON.stringify(E);try{if(navigator.sendBeacon){navigator.sendBeacon(this.collectorUrl,h);return}}catch{}fetch(this.collectorUrl,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:h,keepalive:!1})}}r(v,"AnalyticsClient")},82918:(z,_,f)=>{f.d(_,{b:()=>C});let d;function x(){return`${Math.round(Math.random()*(Math.pow(2,31)-1))}.${Math.round(Date.now()/1e3)}`}r(x,"generateClientId");function T(u){const v=`GH1.1.${u}`,w=Date.now(),a=new Date(w+1*365*86400*1e3).toUTCString();let{domain:p}=document;p.endsWith(".github.com")&&(p="github.com"),document.cookie=`_octo=${v}; expires=${a}; path=/; domain=${p}; secure; samesite=lax`}r(T,"setClientIdCookie");function R(){let u;const w=document.cookie.match(/_octo=([^;]+)/g);if(!w)return;let a=[0,0];for(const p of w){const[,E]=p.split("="),[,h,...j]=E.split("."),F=h.split("-").map(Number);F>a&&(a=F,u=j.join("."))}return u}r(R,"getClientIdFromCookie");function C(){try{const u=R();if(u)return u;const v=x();return T(v),v}catch{return d||(d=x()),d}}r(C,"getOrCreateClientId")},88149:(z,_,f)=>{f.d(_,{n:()=>d});function d(x="ha"){let T;const R={},C=document.head.querySelectorAll(`meta[name^="${x}-"]`);for(const u of Array.from(C)){const{name:v,content:w}=u,a=v.replace(`${x}-`,"").replace(/-/g,"_");a==="url"?T=w:R[a]=w}if(!T)throw new Error(`AnalyticsClient ${x}-url meta tag not found`);return{collectorUrl:T,...Object.keys(R).length>0?{baseContext:R}:{}}}r(d,"getOptionsFromMeta")},27034:(z,_,f)=>{f.d(_,{Z:()=>w});const d=new WeakMap,x=new IntersectionObserver(a=>{for(const p of a)if(p.isIntersecting){const{target:E}=p;if(x.unobserve(E),!(E instanceof w))return;E.loading==="lazy"&&R(E)}},{rootMargin:"0px 0px 256px 0px",threshold:.01});function T(){return new Promise(a=>setTimeout(a,0))}r(T,"task");async function R(a){return x.unobserve(a),C(a).then(function(p){const E=document.createElement("template");E.innerHTML=p;const h=document.importNode(E.content,!0);!a.dispatchEvent(new CustomEvent("include-fragment-replace",{cancelable:!0,detail:{fragment:h}}))||(a.replaceWith(h),a.dispatchEvent(new CustomEvent("include-fragment-replaced")))},function(){a.classList.add("is-error")})}r(R,"handleData");function C(a){const p=a.src;let E=d.get(a);return E&&E.src===p?E.data:(p?E=u(a):E=Promise.reject(new Error("missing src")),d.set(a,{src:p,data:E}),E)}r(C,"getData");function u(a){return T().then(()=>(a.dispatchEvent(new Event("loadstart")),a.fetch(a.request()))).then(p=>{if(p.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${p.status}`);const E=p.headers.get("Content-Type");if(!v(a.accept)&&(!E||!E.includes(a.accept?a.accept:"text/html")))throw new Error(`Failed to load resource: expected ${a.accept||"text/html"} but was ${E}`);return p.text()}).then(p=>(T().then(()=>{a.dispatchEvent(new Event("load")),a.dispatchEvent(new Event("loadend"))}),p),p=>{throw T().then(()=>{a.dispatchEvent(new Event("error")),a.dispatchEvent(new Event("loadend"))}),p})}r(u,"fetchDataWithEvents");function v(a){return a&&!!a.split(",").find(p=>p.match(/^\s*\*\/\*/))}r(v,"isWildcard");class w extends HTMLElement{static get observedAttributes(){return["src","loading"]}get src(){const p=this.getAttribute("src");if(p){const E=this.ownerDocument.createElement("a");return E.href=p,E.href}else return""}set src(p){this.setAttribute("src",p)}get loading(){return this.getAttribute("loading")==="lazy"?"lazy":"eager"}set loading(p){this.setAttribute("loading",p)}get accept(){return this.getAttribute("accept")||""}set accept(p){this.setAttribute("accept",p)}get data(){return C(this)}attributeChangedCallback(p,E){p==="src"?this.isConnected&&this.loading==="eager"&&R(this):p==="loading"&&this.isConnected&&E!=="eager"&&this.loading==="eager"&&R(this)}constructor(){super();this.attachShadow({mode:"open"}).innerHTML=`
      <style> 
        :host {
          display: block;
        }
      </style>
      <slot></slot>`}connectedCallback(){this.src&&this.loading==="eager"&&R(this),this.loading==="lazy"&&x.observe(this)}request(){const p=this.src;if(!p)throw new Error("missing src");return new Request(p,{method:"GET",credentials:"same-origin",headers:{Accept:this.accept||"text/html"}})}load(){return C(this)}fetch(p){return fetch(p)}}r(w,"IncludeFragmentElement"),window.customElements.get("include-fragment")||(window.IncludeFragmentElement=w,window.customElements.define("include-fragment",w))}},z=>{var _=r(d=>z(z.s=d),"__webpack_exec__");z.O(0,[5724,93,90,2734,3682,4924,6791],()=>_(46100));var f=z.O()}]);})();

//# sourceMappingURL=diffs-530942a2e2bb.js.map